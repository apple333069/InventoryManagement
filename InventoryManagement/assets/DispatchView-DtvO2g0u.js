import{_ as Xe,r as u,o as Je,a as Ze,A as el,y as _e,L as ll,b as p,d as s,k as l,i as w,w as t,j as b,u as n,e as o,l as x,m as i,v as c,F as P,q as N,h as U,p as tl,z as al}from"./index-DuMLqF1m.js";import{M as I}from"./ManageTable-CLoVzGHA.js";const ol={class:"flex flex-col space-y-4"},nl={key:0},dl={class:"p-8 bg-white rounded-t-md shadow max-h-[82vh] overflow-y-auto"},rl={class:"w-5/6"},sl={class:"flex space-x-2 justify-center"},ul={class:"group-hover:hidden"},il={class:"group-hover:block hidden"},pl={class:"grid grid-cols-3 gap-2 items-center"},ml={class:"col-span-1 mt-1"},bl={class:"editTable mt-2"},fl={key:0,class:"space-y-2 pt-2 w-full"},cl=["onDragstart","onDrop"],gl=["src"],vl={class:"grow"},yl={class:"font-semibold text-sm"},xl={class:"text-xs text-gray-500"},Dl={class:"p-4 bg-white rounded-b-md shadow text-center mt-auto border-t"},wl={key:1,class:"p-2 bg-white rounded-md shadow min-h-[88vh] overflow-auto"},_l={key:2,class:"p-2 bg-white rounded-md shadow min-h-[88vh] overflow-auto"},kl={key:3,class:"p-2 bg-white rounded-md shadow min-h-[88vh] overflow-auto"},Vl={key:4,class:"p-2 bg-white rounded-md shadow min-h-[88vh] overflow-auto"},hl={class:"flex justify-end mb-2"},Cl={key:0},Wl={key:1},Pl={key:2},Nl={key:3},Ul={key:4},Il={key:5},Ml={key:6},Sl={key:7},Rl={key:8},$l={key:9},Ll={class:"p-2 min-h-12 mb-2 border border-dashed border-gray-300 flex items-center"},Tl={class:"grid grid-cols-2"},Al={class:"h-72 min-h-72 overflow-y-auto border-r-2"},Ol={class:"pl-4 h-72"},Bl={key:0},Yl={class:"flex flex-col"},Ql={key:1,class:"flex h-72 items-center justify-center"},Hl={class:"dialog-footer border-t pt-4"},Fl={class:"p-2 min-h-12 mb-2 border border-dashed border-gray-300 flex items-center"},jl={class:"h-72 min-h-72 overflow-y-auto"},El={class:"dialog-footer border-t pt-4"},ql={__name:"DispatchView",setup(zl){const M=u("add"),F=u(!1),T=u("1"),j=u(""),de=u(!1),J=u(!1),Z=u(!1),E=u(""),q=u(""),re=u(null),V=u([]),se=u("upload"),ee=u(!1),z=u([]),ue=u([]),ke=u([]),A=u(!1),O=u(!1),B=u("member"),R=u(""),ie=u(null),le=u([]),G=u(null),K=u(null),te=u(null),Ve=d=>{const f=d.clipboardData.getData("text/plain");if(!f)return;if(f.includes('"')){alert("貼上的數據格式錯誤！"),d.preventDefault();return}ue.value.push([...z.value]);const Q=f.trim().split(`
`).map(H=>{const v=H.split("	"),m={};return ce.value.forEach((y,$)=>{m[y.prop]=v[$]||""}),m});z.value=[...z.value,...Q]},fe=d=>{d.ctrlKey&&d.key==="z"&&(ue.value.length>0?z.value=ue.value.pop():console.log("沒有更多的歷史數據可以復原"))};Je(()=>{document.addEventListener("keydown",fe)}),Ze(()=>{document.removeEventListener("keydown",fe)});const pe=el([{pdName:"暫無內容",pdCode:"暫無內容",brand:"暫無內容",model:"暫無內容",unit:"暫無內容",saleQty:"暫無內容",stockQty:"暫無內容",availableStockQty:"暫無內容",outQty:"",outWarehouse:""}]),he=()=>{pe.push({pdName:"暫無內容",pdCode:"暫無內容",brand:"暫無內容",model:"暫無內容",unit:"暫無內容",saleQty:"暫無內容",stockQty:"暫無內容",availableStockQty:"暫無內容",outQty:"",outWarehouse:""})},Ce=d=>{ElMessageBox.confirm("確定要刪除這筆資料嗎？","提示",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then(()=>{pe.splice(d,1)}).catch(()=>{})},We=(d,e)=>{console.log(d,e)},Pe=(d,e)=>{const f=new FileReader;f.onload=S=>{V.value.push({file:d,url:S.target.result})},f.readAsDataURL(d.raw)},Ne=d=>{const e=d.type.startsWith("image/"),f=d.size/1024/1024<5;return e||this.$message.error("只能上傳圖片"),f||this.$message.error("圖片大小不能超過 5MB"),e&&f},Ue=d=>{V.value.splice(d,1)},Ie=d=>{V.value.draggedIndex=d},Me=d=>{const e=V.value.draggedIndex,f=V.value[e];V.value.splice(e,1),V.value.splice(d,0,f)},Se=d=>d<1024?`${d} B`:d<1024*1024?`${(d/1024).toFixed(2)} KB`:`${(d/(1024*1024)).toFixed(2)} MB`,Re=d=>{const e=d.clipboardData.items;for(let f=0;f<e.length;f++){const S=e[f];if(S.type.startsWith("image")){const Q=S.getAsFile(),H=new FileReader;H.onload=v=>{V.value.push({file:Q,url:v.target.result})},H.readAsDataURL(Q)}}d.preventDefault()},g=u({orderName:"",orderID:"",customerName:"",customerID:"",contactName:"",contactPhone:"",salesPerson:"",salesDepartment:"",salesOrderID:""}),$e=u([{prop:"orderName",label:"銷售訂單名稱",minWidth:120},{prop:"orderID",label:"銷售訂單編號",minWidth:120},{prop:"customerName",label:"客戶名稱",minWidth:100},{prop:"contractDate",label:"合約簽訂日期",minWidth:120},{prop:"totalAmount",label:"訂單金額合計/元",minWidth:130},{prop:"status",label:"審批結果",minWidth:150},{prop:"salesPerson",label:"銷售負責人",minWidth:100},{prop:"products",label:"產品明細",headerAlign:"center",children:[{prop:"pdName",label:"產品名稱",minWidth:180},{prop:"pdCode",label:"產品編碼",minWidth:150},{prop:"brand",label:"品牌",minWidth:100},{prop:"model",label:"規格型號",minWidth:150},{prop:"unit",label:"單位",minWidth:100},{prop:"unitPrice",label:"銷售價格/元",minWidth:150,align:"right",headerAlign:"left"},{prop:"totalPrice",label:"採購單價/元",minWidth:150,align:"right",headerAlign:"left"},{prop:"vatRate",label:"增值稅稅率%",minWidth:120},{prop:"count",label:"數量"},{prop:"totalPrice",label:"產品價格合計/元",minWidth:150,align:"right",headerAlign:"left"},{prop:"totalCost",label:"產品成本合計/元",minWidth:150,align:"right",headerAlign:"left"}]}]),Le=u([{orderName:"訂單1",orderID:"ORD123456",customerName:"王小明",contractDate:"2024/01/15",totalAmount:5e4,status:"審批通過",salesPerson:"張大華",products:[{pdCode:"A001",pdName:"手機",brand:"華為",model:"P40 Pro",unit:"部",unitPrice:15e3,totalPrice:15e3,vatRate:5,count:3,totalCost:42e3},{pdCode:"A002",pdName:"耳機",brand:"Sony",model:"WH-1000XM5",unit:"副",unitPrice:6e3,totalPrice:6e3,vatRate:5,count:2,totalCost:11e3}]},{orderName:"訂單2",orderID:"ORD123457",customerName:"李小華",contractDate:"2024/02/20",totalAmount:8e4,status:"待審批",salesPerson:"王美玲",products:[{pdCode:"B001",pdName:"筆記型電腦",brand:"蘋果",model:"MacBook Pro",unit:"台",unitPrice:4e4,totalPrice:4e4,vatRate:5,count:2,totalCost:75e3}]},{orderName:"訂單3",orderID:"ORD123458",customerName:"蔡中興",contractDate:"2024/03/10",totalAmount:12e3,status:"已拒絕",salesPerson:"林建明",products:[{pdCode:"C001",pdName:"智慧手錶",brand:"Samsung",model:"Galaxy Watch 5",unit:"個",unitPrice:6e3,totalPrice:6e3,vatRate:5,count:2,totalCost:1e4}]}]),h=u([{prop:"orderName",label:"銷售訂單名稱",minWidth:120},{prop:"orderID",label:"銷售訂單編號",minWidth:120},{prop:"customerName",label:"客戶名稱",minWidth:120},{prop:"customerID",label:"客戶編碼",minWidth:120},{prop:"contactName",label:"客戶聯繫人姓名",minWidth:130},{prop:"contactPhone",label:"客戶聯繫人手機",minWidth:130},{prop:"salesPerson",label:"銷售負責人",minWidth:120},{prop:"salesDepartment",label:"銷售歸屬部門",minWidth:120},{prop:"salesOrderID",label:"銷售出庫單編號",minWidth:130},{prop:"outboundLabel",label:"產品出庫標籤",minWidth:120,slot:"outboundLabel"},{prop:"outboundWarehouse",label:"出庫倉庫",minWidth:120},{prop:"products",label:"產品明細",headerAlign:"center",children:[{prop:"pdName",label:"產品名稱",minWidth:180},{prop:"pdCode",label:"產品編碼",minWidth:150},{prop:"brand",label:"品牌",minWidth:100},{prop:"model",label:"規格型號",minWidth:100},{prop:"unit",label:"單位",minWidth:100},{prop:"unitPrice",label:"銷售價格/元",minWidth:150,align:"right",headerAlign:"left"},{prop:"totalPrice",label:"採購單價/元",minWidth:150,align:"right",headerAlign:"left"},{prop:"vatRate",label:"增值稅稅率%",minWidth:120},{prop:"count",label:"數量"},{prop:"totalPrice",label:"產品價格合計/元",minWidth:150,align:"right",headerAlign:"left"},{prop:"totalCost",label:"產品成本合計/元",minWidth:150,align:"right",headerAlign:"left"}]}]),Y=u([{orderName:"訂單1",orderID:"ORD123456",customerName:"王小明",customerID:"CUST202301",contactName:"王小明",contactPhone:"0912345678",salesPerson:"張大華",salesDepartment:"北區銷售部",salesOrderID:"OUT202401001",outboundLabel:["出庫"],outboundWarehouse:"北區倉庫",pdCode:"A001",pdName:"手機",brand:"華為",model:"P40 Pro",unit:"部",unitPrice:15e3,totalPrice:15e3,vatRate:5,count:3,totalCost:42e3},{orderName:"訂單2",orderID:"ORD123457",customerName:"李小華",customerID:"CUST202302",contactName:"張小華",contactPhone:"0923456789",salesPerson:"陳美芳",salesDepartment:"南區銷售部",salesOrderID:"OUT202402001",outboundLabel:["庫存凍結"],outboundWarehouse:"南區倉庫",pdCode:"B001",pdName:"筆記型電腦",brand:"蘋果",model:"MacBook Pro",unit:"台",unitPrice:4e4,totalPrice:4e4,vatRate:5,count:2,totalCost:75e3},{orderName:"訂單3",orderID:"ORD123458",customerName:"蔡中興",customerID:"CUST202302",contactName:"李大華",contactPhone:"0923456789",salesPerson:"陳美芳",salesDepartment:"中區銷售部",salesOrderID:"OUT202402002",outboundLabel:["計畫出庫"],outboundWarehouse:"中區倉庫",pdCode:"C001",pdName:"智慧手錶",brand:"Samsung",model:"Galaxy Watch 5",unit:"個",unitPrice:6e3,totalPrice:6e3,vatRate:5,count:2,totalCost:1e4},{orderName:"訂單4",orderID:"ORD123488",customerName:"李大明",customerID:"CUST202304",contactName:"王大華",contactPhone:"0912876543",salesPerson:"張慧珍",salesDepartment:"東區銷售部",salesOrderID:"OUT202402003",outboundLabel:["出庫"],outboundWarehouse:"東區倉庫",pdCode:"B001",pdName:"筆記型電腦",brand:"蘋果",model:"MacBook Pro",unit:"台",unitPrice:4e4,totalPrice:4e4,vatRate:5,count:2,totalCost:75e3}]),ae=_e(()=>({all:Y.value,out:Y.value.filter(d=>d.outboundLabel.includes("出庫")),frozen:Y.value.filter(d=>d.outboundLabel.includes("庫存凍結")),planned:Y.value.filter(d=>d.outboundLabel.includes("計畫出庫"))})),ce=u([{prop:"outQty",label:"本次出庫數量"},{prop:"outWarehouse",label:"出庫倉位"}]),Te=d=>{g.value={...d},F.value=!1},Ae=_e(()=>Le.value.filter(d=>!j.value||d.name.toLowerCase().includes(j.value.toLowerCase()))),Oe=()=>{if(J.value=!J.value,J.value){const d=new Date;E.value=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")} ${String(d.getHours()).padStart(2,"0")}:${String(d.getMinutes()).padStart(2,"0")}`}else E.value=""},Be=()=>{if(Z.value=!Z.value,Z.value){const d=new Date;q.value=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")} ${String(d.getHours()).padStart(2,"0")}:${String(d.getMinutes()).padStart(2,"0")}`}else q.value=""},Ye=d=>{switch(d){case"審批通過":return"success";case"待審批":return"warning";case"已拒絕":return"danger";default:return"info"}},me=d=>{switch(d){case"出庫":return"success";case"計畫出庫":return"warning";case"庫存凍結":return"danger";default:return"info"}},ge=(d,e)=>{};ll(R,function(d){ie.value.filter(d)});const ve=(d,e)=>d?e.label.includes(d):!0,Qe=d=>{le.value=Fe(d.id),G.value=null,K.value=null},He=d=>{te.value=d.label},Fe=d=>({101:[{id:"1",name:"張三"},{id:"2",name:"李四"}],201:[{id:"3",name:"王五"},{id:"4",name:"趙六"}],202:[{id:"5",name:"小明"},{id:"6",name:"小紅"}]})[d]||[],ye=u([{id:1,label:"軟件有限公司",children:[{id:"101",label:"生產部"},{id:"102",label:"銷售部",children:[{id:"201",label:"銷售一部"},{id:"202",label:"銷售二部"}]},{id:"103",label:"研發部"},{id:"104",label:"市場部"},{id:"105",label:"採購部"},{id:"106",label:"財務部"}]}]),je=d=>{K.value=le.value.find(e=>e.id===d)};return(d,e)=>{const f=b("el-option"),S=b("el-select"),Q=b("el-col"),H=b("el-row"),v=b("el-button"),m=b("el-form-item"),y=b("el-input"),$=b("el-form"),_=b("el-tag"),L=b("el-radio"),xe=b("el-radio-group"),oe=b("el-dropdown-item"),Ee=b("el-dropdown-menu"),qe=b("el-dropdown"),D=b("el-table-column"),be=b("el-table"),De=b("el-date-picker"),ze=b("el-upload"),k=b("el-tab-pane"),X=b("el-tabs"),Ge=b("el-tooltip"),ne=b("el-dialog"),we=b("el-tree");return s(),p("main",ol,[l(H,{class:"p-3 bg-white rounded-md shadow flex justify-end md:justify-start"},{default:t(()=>[l(Q,{span:5},{default:t(()=>[l(S,{modelValue:n(M),"onUpdate:modelValue":e[0]||(e[0]=a=>x(M)?M.value=a:null),placeholder:"請選擇"},{default:t(()=>[l(f,{label:"僅新增資料",value:"add"}),l(f,{label:"新增並管理本人資料",value:"selfManage"}),l(f,{label:"添加並管理數據",value:"manage"}),l(f,{label:"查看全部資料",value:"view"}),e[38]||(e[38]=o("hr",null,null,-1)),l(f,{label:"全部有限權的資料",value:"restricted"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),n(M)==="add"?(s(),p("div",nl,[o("div",dl,[e[58]||(e[58]=o("h2",{class:"text-lg font-bold text-primary border-b-4 border-blue-100"}," 銷售訂單資料 ",-1)),e[59]||(e[59]=o("p",{class:"text-sm text-gray-500"}," 出庫後，即可智能助手自動生成應收帳款明細，進行對帳~ ",-1)),l($,{"label-position":"top",class:"grid grid-cols-1 xl:grid-cols-3 gap-x-16 py-7 px-2 font-bold"},{default:t(()=>[l(m,{label:"選擇銷售訂單",required:!0},{default:t(()=>[l(v,{class:"w-3/4",onClick:e[1]||(e[1]=a=>F.value=!0)},{default:t(()=>[...e[39]||(e[39]=[o("i",{class:"ri-database-2-line mr-1"},null,-1),i("選擇資料",-1)])]),_:1})]),_:1}),l(m,{label:"銷售訂單名稱"},{default:t(()=>[l(y,{modelValue:n(g).orderName,"onUpdate:modelValue":e[2]||(e[2]=a=>n(g).orderName=a),disabled:"",placeholder:"暫無內容"},null,8,["modelValue"])]),_:1}),l(m,{label:"銷售訂單編號"},{default:t(()=>[l(y,{modelValue:n(g).orderID,"onUpdate:modelValue":e[3]||(e[3]=a=>n(g).orderID=a),disabled:"",placeholder:"暫無內容"},null,8,["modelValue"])]),_:1}),l(m,{label:"客戶名稱"},{default:t(()=>[l(y,{modelValue:n(g).customerName,"onUpdate:modelValue":e[4]||(e[4]=a=>n(g).customerName=a),disabled:"",placeholder:"暫無內容"},null,8,["modelValue"])]),_:1}),l(m,{label:"客戶編碼"},{default:t(()=>[l(y,{modelValue:n(g).customerID,"onUpdate:modelValue":e[5]||(e[5]=a=>n(g).customerID=a),disabled:"",placeholder:"暫無內容"},null,8,["modelValue"])]),_:1}),l(m,{label:"客戶聯繫人姓名"},{default:t(()=>[l(y,{modelValue:n(g).contactName,"onUpdate:modelValue":e[6]||(e[6]=a=>n(g).contactName=a),disabled:"",placeholder:"暫無內容"},null,8,["modelValue"])]),_:1}),l(m,{label:"客戶聯繫人手機"},{default:t(()=>[l(y,{modelValue:n(g).contactPhone,"onUpdate:modelValue":e[7]||(e[7]=a=>n(g).contactPhone=a),disabled:"",placeholder:"暫無內容"},null,8,["modelValue"])]),_:1}),l(m,{label:"銷售負責人"},{default:t(()=>[l(y,{modelValue:n(g).salesPerson,"onUpdate:modelValue":e[8]||(e[8]=a=>n(g).salesPerson=a),disabled:"",placeholder:"暫無內容"},null,8,["modelValue"])]),_:1}),l(m,{label:"銷售歸屬部門"},{default:t(()=>[l(y,{modelValue:n(g).salesDepartment,"onUpdate:modelValue":e[9]||(e[9]=a=>n(g).salesDepartment=a),disabled:"",placeholder:"暫無內容"},null,8,["modelValue"])]),_:1}),l(m,{label:"銷售出庫單編號",class:"w-3/4"},{default:t(()=>[l(y,{modelValue:n(g).salesOrderID,"onUpdate:modelValue":e[10]||(e[10]=a=>n(g).salesOrderID=a),disabled:"",placeholder:"自動生成無需填寫"},null,8,["modelValue"])]),_:1})]),_:1}),e[60]||(e[60]=o("h2",{class:"text-lg font-bold text-primary border-b-4 border-blue-100"}," 出庫產品明細 ",-1)),e[61]||(e[61]=o("p",{class:"text-sm text-gray-500"}," 銷售訂單可以提前進行出庫規劃：庫存凍結、計畫出庫! ",-1)),l($,{"label-position":"top",class:"grid grid-cols-1 xl:grid-cols-3 gap-x-16 py-7 px-2 font-bold"},{default:t(()=>[l(m,{label:"產品出庫標籤",required:!0},{default:t(()=>[l(xe,{modelValue:n(de),"onUpdate:modelValue":e[11]||(e[11]=a=>x(de)?de.value=a:null)},{default:t(()=>[l(L,{value:"1"},{default:t(()=>[l(_,{type:"success",effect:"dark"},{default:t(()=>[...e[40]||(e[40]=[i("出庫",-1)])]),_:1})]),_:1}),l(L,{value:"2"},{default:t(()=>[l(_,{type:"danger",effect:"dark"},{default:t(()=>[...e[41]||(e[41]=[i("庫存凍結",-1)])]),_:1})]),_:1}),l(L,{value:"3"},{default:t(()=>[l(_,{type:"warning",effect:"dark"},{default:t(()=>[...e[42]||(e[42]=[i("計畫出庫",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"出庫倉庫"},{default:t(()=>[l(y)]),_:1}),l(m,{label:"出庫產品明細",class:"xl:col-span-3"},{default:t(()=>[o("div",rl,[l(be,{data:n(pe),"header-cell-style":{backgroundColor:"#f5f7f8",color:"#606266",fontWeight:"bold"},"cell-style":{color:"#9ca3af"},"row-class-name":()=>"group",border:"","empty-text":"暫無資料"},{default:t(()=>[l(D,{label:"",width:"80"},{default:t(a=>[o("div",sl,[o("span",ul,c(a.$index+1),1),o("div",il,[o("div",pl,[l(v,{class:"col-span-1 col-start-2",type:"danger",link:"",onClick:r=>Ce(a.$index)},{default:t(()=>[...e[43]||(e[43]=[o("i",{class:"ri-delete-bin-line text-lg"},null,-1)])]),_:1},8,["onClick"]),o("div",ml,[l(qe,{trigger:"click",placement:"bottom-start"},{dropdown:t(()=>[l(Ee,null,{default:t(()=>[l(oe,null,{default:t(()=>[...e[45]||(e[45]=[i("複製到下一行",-1)])]),_:1}),l(oe,null,{default:t(()=>[...e[46]||(e[46]=[i("複製到最後一行",-1)])]),_:1}),l(oe,null,{default:t(()=>[...e[47]||(e[47]=[i("向上插入行",-1)])]),_:1}),l(oe,null,{default:t(()=>[...e[48]||(e[48]=[i("向下插入行",-1)])]),_:1})]),_:1})]),default:t(()=>[l(v,{link:"",type:"primary"},{default:t(()=>[...e[44]||(e[44]=[o("i",{class:"ri-more-2-fill"},null,-1)])]),_:1})]),_:1})])])])])]),_:1}),l(D,{prop:"pdName",label:"產品名稱"}),l(D,{prop:"pdCode",label:"產品編碼"}),l(D,{prop:"brand",label:"品牌"}),l(D,{prop:"model",label:"規格型號"}),l(D,{prop:"unit",label:"單位"}),l(D,{prop:"saleQty",label:"銷售數量"}),l(D,{prop:"stockQty",label:"待出庫數量"}),l(D,{prop:"availableStockQty",label:"當前可用庫存數量",width:"150"}),l(D,{label:"本次出庫數量",width:"150"},{default:t(a=>[l(y,{modelValue:a.row.outQty,"onUpdate:modelValue":r=>a.row.outQty=r,placeholder:"輸入數量",type:"number",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(D,{label:"出庫倉位",width:"150"},{default:t(a=>[l(S,{modelValue:a.row.outWarehouse,"onUpdate:modelValue":r=>a.row.outWarehouse=r,placeholder:"選擇倉位",class:"w-full",filterable:"","no-match-text":"沒有符合的數據","no-data-text":"沒有可選擇的數據"},{default:t(()=>[(s(!0),p(P,null,N(n(ke),r=>(s(),U(f,{key:r.value,label:r.label,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"]),o("div",bl,[l(v,{type:"primary",text:"",onClick:he},{default:t(()=>[...e[49]||(e[49]=[o("i",{class:"ri-add-line text-lg pr-1"},null,-1),i("新增",-1)])]),_:1}),l(v,{type:"primary",text:"",onClick:e[12]||(e[12]=a=>ee.value=!0)},{default:t(()=>[...e[50]||(e[50]=[o("i",{class:"ri-file-edit-line text-lg pr-1"},null,-1),i("貼上新增",-1)])]),_:1})])])]),_:1})]),_:1}),l($,{"label-position":"top",class:"grid grid-cols-1 xl:grid-cols-3 gap-x-16 pb-6 px-2 font-bold"},{default:t(()=>[l(m,{label:"出庫產品總數"},{default:t(()=>[l(y,{disabled:"",placeholder:"0"})]),_:1}),l(m,{label:"出庫產品售價總額(含稅)/元"},{default:t(()=>[l(y,{disabled:"",placeholder:"0.00"})]),_:1})]),_:1}),e[62]||(e[62]=o("h2",{class:"text-lg font-bold text-primary border-b-4 border-blue-100"}," 出庫確認 ",-1)),l($,{"label-position":"top",class:"grid grid-cols-1 xl:grid-cols-3 gap-x-16 py-7 px-2 font-bold"},{default:t(()=>[l(m,{label:"產品出庫確認",required:!0},{default:t(()=>[l(L,{"model-value":n(J),label:!0,onClick:Oe},{default:t(()=>[l(_,{type:"primary",effect:"dark"},{default:t(()=>[...e[51]||(e[51]=[i("確認",-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),l(m,{label:"出庫時間",required:!0},{default:t(()=>[l(De,{modelValue:n(E),"onUpdate:modelValue":e[13]||(e[13]=a=>x(E)?E.value=a:null),type:"datetime",style:{width:"100%"},format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm"},null,8,["modelValue"])]),_:1}),l(m,{label:"拍照"},{default:t(()=>[l(X,{modelValue:n(se),"onUpdate:modelValue":e[14]||(e[14]=a=>x(se)?se.value=a:null),class:"w-full",type:"border-card",onTabClick:We},{default:t(()=>[l(k,{label:"拖拉或點擊",name:"upload"},{default:t(()=>[l(ze,{class:"w-full",action:"#","show-file-list":!1,"on-change":Pe,"before-upload":Ne,multiple:"",accept:"image/*","auto-upload":!1,drag:""},{default:t(()=>[...e[52]||(e[52]=[o("span",{class:"text-gray-500"},"拖拉或點擊上傳圖片",-1)])]),_:1})]),_:1}),l(k,{label:"Ctrl+v",name:"paste"},{default:t(()=>[o("div",{class:"w-full",onPaste:Re},[...e[53]||(e[53]=[o("div",{class:"bg-white border border-dashed border-gray-300 rounded-lg box-border cursor-pointer overflow-hidden px-4 py-2 text-center relative"},[o("span",{class:"text-gray-500"},"Ctrl+v 上傳圖片")],-1)])],32)]),_:1})]),_:1},8,["modelValue"]),n(V).length?(s(),p("div",fl,[(s(!0),p(P,null,N(n(V),(a,r)=>(s(),p("div",{key:r,class:"flex items-center gap-4 p-2 w-full border border-gray-300 rounded-lg",onDragstart:C=>Ie(r),onDragover:e[15]||(e[15]=tl(()=>{},["prevent"])),onDrop:C=>Me(r),draggable:""},[o("img",{src:a.url,alt:"Uploaded image",class:"w-12 h-12 object-cover rounded-lg cursor-move"},null,8,gl),o("div",vl,[o("p",yl,c(a.file.name),1),o("p",xl,c(Se(a.file.size)),1)]),l(v,{onClick:C=>Ue(r),text:""},{default:t(()=>[...e[54]||(e[54]=[o("i",{class:"ri-delete-bin-line"},null,-1)])]),_:1},8,["onClick"])],40,cl))),128))])):w("",!0)]),_:1}),l(m,{label:"出庫員"},{default:t(()=>[l(v,{class:"w-full",onClick:e[16]||(e[16]=a=>A.value=!0)},{default:t(()=>[...e[55]||(e[55]=[o("i",{class:"ri-add-line text-lg"},null,-1),i("選擇成員",-1)])]),_:1})]),_:1}),l(m,{label:"倉管歸屬部門"},{default:t(()=>[l(v,{class:"w-full",onClick:e[17]||(e[17]=a=>O.value=!0)},{default:t(()=>[...e[56]||(e[56]=[o("i",{class:"ri-add-line text-lg"},null,-1),i("選擇部門",-1)])]),_:1})]),_:1})]),_:1}),e[63]||(e[63]=o("h2",{class:"text-lg font-bold text-primary border-b-4 border-blue-100"}," 收貨確認 ",-1)),l($,{"label-position":"top",class:"grid grid-cols-1 xl:grid-cols-3 gap-x-16 py-7 px-2 font-bold"},{default:t(()=>[l(m,{label:"客戶收貨確認"},{default:t(()=>[l(L,{"model-value":n(Z),label:!0,onClick:Be},{default:t(()=>[l(_,{type:"primary",effect:"dark"},{default:t(()=>[...e[57]||(e[57]=[i("確認",-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),l(m,{label:"收貨確認時間"},{default:t(()=>[l(De,{modelValue:n(q),"onUpdate:modelValue":e[18]||(e[18]=a=>x(q)?q.value=a:null),type:"datetime",style:{width:"100%"},format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm"},null,8,["modelValue"])]),_:1})]),_:1})]),o("div",Dl,[l(v,{type:"primary"},{default:t(()=>[...e[64]||(e[64]=[i("送出",-1)])]),_:1})])])):n(M)==="selfManage"?(s(),p("div",wl,[l(X,{modelValue:n(T),"onUpdate:modelValue":e[19]||(e[19]=a=>x(T)?T.value=a:null)},{default:t(()=>[l(k,{name:"1"},{label:t(()=>[...e[65]||(e[65]=[o("span",{class:"custom-tabs-label"},[o("i",{class:"ri-table-line mr-1"}),o("span",null,"全部出庫")],-1)])]),default:t(()=>[l(I,{tableData:[],columns:n(h)},null,8,["columns"])]),_:1}),l(k,{name:"2"},{label:t(()=>[...e[66]||(e[66]=[o("span",{class:"custom-tabs-label"},[o("i",{class:"ri-table-line mr-1"}),o("span",null,"已出庫")],-1)])]),default:t(()=>[l(I,{tableData:[],columns:n(h)},null,8,["columns"])]),_:1}),l(k,{name:"3"},{label:t(()=>[...e[67]||(e[67]=[o("span",{class:"custom-tabs-label"},[o("i",{class:"ri-table-line mr-1"}),o("span",null,"庫存凍結")],-1)])]),default:t(()=>[l(I,{tableData:[],columns:n(h)},null,8,["columns"])]),_:1}),l(k,{name:"4"},{label:t(()=>[...e[68]||(e[68]=[o("span",{class:"custom-tabs-label"},[o("i",{class:"ri-table-line mr-1"}),o("span",null,"計畫出庫")],-1)])]),default:t(()=>[l(I,{tableData:[],columns:n(h)},null,8,["columns"])]),_:1})]),_:1},8,["modelValue"])])):n(M)==="manage"?(s(),p("div",_l,[l(X,{modelValue:n(T),"onUpdate:modelValue":e[20]||(e[20]=a=>x(T)?T.value=a:null)},{default:t(()=>[l(k,{name:"1"},{label:t(()=>[...e[69]||(e[69]=[o("span",{class:"custom-tabs-label"},[o("i",{class:"ri-table-line mr-1"}),o("span",null,"全部出庫")],-1)])]),default:t(()=>[l(I,{tableData:n(ae).all,columns:n(h)},{outboundLabel:t(({row:a})=>[(s(!0),p(P,null,N(a.outboundLabel,(r,C)=>(s(),U(_,{key:C,type:me(r),effect:"dark",class:"mr-2"},{default:t(()=>[i(c(r),1)]),_:2},1032,["type"]))),128))]),_:1},8,["tableData","columns"])]),_:1}),l(k,{name:"2"},{label:t(()=>[...e[70]||(e[70]=[o("span",{class:"custom-tabs-label"},[o("i",{class:"ri-table-line mr-1"}),o("span",null,"已出庫")],-1)])]),default:t(()=>[l(I,{tableData:n(ae).out,columns:n(h)},{outboundLabel:t(()=>[l(_,{type:"success",effect:"dark"},{default:t(()=>[...e[71]||(e[71]=[i("出庫",-1)])]),_:1})]),_:1},8,["tableData","columns"])]),_:1}),l(k,{name:"3"},{label:t(()=>[...e[72]||(e[72]=[o("span",{class:"custom-tabs-label"},[o("i",{class:"ri-table-line mr-1"}),o("span",null,"庫存凍結")],-1)])]),default:t(()=>[l(I,{tableData:n(ae).frozen,columns:n(h)},{outboundLabel:t(()=>[l(_,{type:"danger",effect:"dark"},{default:t(()=>[...e[73]||(e[73]=[i("庫存凍結",-1)])]),_:1})]),_:1},8,["tableData","columns"])]),_:1}),l(k,{name:"4"},{label:t(()=>[...e[74]||(e[74]=[o("span",{class:"custom-tabs-label"},[o("i",{class:"ri-table-line mr-1"}),o("span",null,"計畫出庫")],-1)])]),default:t(()=>[l(I,{tableData:n(ae).planned,columns:n(h)},{outboundLabel:t(()=>[l(_,{type:"warning",effect:"dark"},{default:t(()=>[...e[75]||(e[75]=[i("計畫出庫",-1)])]),_:1})]),_:1},8,["tableData","columns"])]),_:1})]),_:1},8,["modelValue"])])):n(M)==="view"?(s(),p("div",kl,[l(I,{edit:!1,tableData:n(Y),columns:n(h)},{outboundLabel:t(({row:a})=>[(s(!0),p(P,null,N(a.outboundLabel,(r,C)=>(s(),U(_,{key:C,type:me(r),effect:"dark",class:"mr-2"},{default:t(()=>[i(c(r),1)]),_:2},1032,["type"]))),128))]),_:1},8,["tableData","columns"])])):n(M)==="restricted"?(s(),p("div",Vl,[l(I,{tableData:n(Y),columns:n(h)},{outboundLabel:t(({row:a})=>[(s(!0),p(P,null,N(a.outboundLabel,(r,C)=>(s(),U(_,{key:C,type:me(r),effect:"dark",class:"mr-2"},{default:t(()=>[i(c(r),1)]),_:2},1032,["type"]))),128))]),_:1},8,["tableData","columns"])])):w("",!0),l(ne,{modelValue:n(F),"onUpdate:modelValue":e[23]||(e[23]=a=>x(F)?F.value=a:null),width:"65%"},{header:t(()=>[...e[76]||(e[76]=[o("div",{class:"flex flex-col items-start mb-4"},[o("span",{class:"text-lg font-bold text-gray-500 mb-2"},"選擇資料"),o("hr",{class:"w-full border-t border-gray-300"})],-1)])]),default:t(()=>[o("div",hl,[o("div",null,[l(y,{modelValue:n(j),"onUpdate:modelValue":e[21]||(e[21]=a=>x(j)?j.value=a:null),placeholder:"輸入關鍵字",clearable:""},{prefix:t(()=>[...e[77]||(e[77]=[o("i",{class:"ri-search-line"},null,-1)])]),_:1},8,["modelValue"])]),o("div",null,[l(Ge,{content:"篩選條件",placement:"bottom","hide-after":10},{default:t(()=>[l(v,{text:""},{default:t(()=>[...e[78]||(e[78]=[o("i",{class:"ri-filter-line"},null,-1)])]),_:1})]),_:1})])]),l(be,{data:n(Ae),"header-cell-style":{backgroundColor:"#f5f7f8",color:"#606266",fontWeight:"bold"},class:"mb-4",border:"",onRowClick:Te},{default:t(()=>[l(D,{align:"center",width:"55",fixed:""},{default:t(a=>[l(L,{label:a.row.orderID,modelValue:n(re),"onUpdate:modelValue":e[22]||(e[22]=r=>x(re)?re.value=r:null)},{default:t(()=>[...e[79]||(e[79]=[i(" ",-1)])]),_:1},8,["label","modelValue"])]),_:1}),(s(!0),p(P,null,N(n($e),a=>(s(),U(D,{key:a.prop,prop:a.prop,label:a.label,width:a.minWidth||null,align:a.align,"header-align":a.headerAlign},al({default:t(()=>[a.children?(s(!0),p(P,{key:0},N(a.children,r=>(s(),U(D,{key:r.prop,prop:r.prop,label:r.label,"min-width":r.minWidth,align:r.align,"header-align":r.headerAlign},{default:t(({row:C})=>[(s(!0),p(P,null,N(C.products,(W,Ke)=>(s(),p("div",{key:Ke},[r.prop==="pdCode"?(s(),p("div",Cl,c(W.pdCode),1)):w("",!0),r.prop==="pdName"?(s(),p("div",Wl,c(W.pdName),1)):w("",!0),r.prop==="brand"?(s(),p("div",Pl,c(W.brand),1)):w("",!0),r.prop==="model"?(s(),p("div",Nl,c(W.model),1)):w("",!0),r.prop==="unit"?(s(),p("div",Ul,c(W.unit),1)):w("",!0),r.prop==="unitPrice"?(s(),p("div",Il,c(W.unitPrice),1)):w("",!0),r.prop==="totalPrice"?(s(),p("div",Ml,c(W.totalPrice),1)):w("",!0),r.prop==="vatRate"?(s(),p("div",Sl,c(W.vatRate),1)):w("",!0),r.prop==="count"?(s(),p("div",Rl,c(W.count),1)):w("",!0),r.prop==="totalCost"?(s(),p("div",$l,c(W.totalCost),1)):w("",!0)]))),128))]),_:2},1032,["prop","label","min-width","align","header-align"]))),128)):w("",!0)]),_:2},[a.prop==="status"?{name:"default",fn:t(({row:r})=>[l(_,{type:Ye(r.status)},{default:t(()=>[i(c(r.status),1)]),_:2},1032,["type"])]),key:"0"}:void 0]),1032,["prop","label","width","align","header-align"]))),128))]),_:1},8,["data"])]),_:1},8,["modelValue"]),l(ne,{modelValue:n(A),"onUpdate:modelValue":e[30]||(e[30]=a=>x(A)?A.value=a:null),width:"800"},{header:t(()=>[...e[80]||(e[80]=[o("div",{class:"flex flex-col items-start mb-4"},[o("span",{class:"text-lg font-bold text-gray-500 mb-2"},"成員列表"),o("hr",{class:"w-full border-t border-gray-300"})],-1)])]),footer:t(()=>[o("div",Hl,[l(v,{onClick:e[28]||(e[28]=a=>A.value=!1)},{default:t(()=>[...e[84]||(e[84]=[i("取消",-1)])]),_:1}),l(v,{type:"primary",onClick:e[29]||(e[29]=a=>A.value=!1)},{default:t(()=>[...e[85]||(e[85]=[i(" 確定 ",-1)])]),_:1})])]),default:t(()=>[o("div",Ll,[n(K)?(s(),U(_,{key:0,closable:"",type:"primary",onClose:e[24]||(e[24]=()=>{K.value=null,G.value=null})},{default:t(()=>[i(c(n(K).name),1)]),_:1})):w("",!0)]),l(y,{modelValue:n(R),"onUpdate:modelValue":e[25]||(e[25]=a=>x(R)?R.value=a:null),placeholder:"輸入關鍵字",clearable:""},{prefix:t(()=>[...e[81]||(e[81]=[o("i",{class:"ri-search-line"},null,-1)])]),_:1},8,["modelValue"]),l(X,{modelValue:n(B),"onUpdate:modelValue":e[27]||(e[27]=a=>x(B)?B.value=a:null),class:"demo-tabs mx-2",onTabClick:ge},{default:t(()=>[l(k,{label:"成員",name:"member"},{default:t(()=>[o("div",Tl,[o("div",Al,[l(we,{ref_key:"treeRef",ref:ie,style:{"max-width":"600px"},class:"filter-tree",data:n(ye),"default-expand-all":"","highlight-current":!0,"filter-node-method":ve,onNodeClick:Qe},null,8,["data"])]),o("div",Ol,[n(le).length>0?(s(),p("div",Bl,[l(xe,{class:"flex flex-col",modelValue:n(G),"onUpdate:modelValue":e[26]||(e[26]=a=>x(G)?G.value=a:null),onChange:je},{default:t(()=>[o("div",Yl,[(s(!0),p(P,null,N(n(le),a=>(s(),U(L,{key:a.id,value:a.id},{default:t(()=>[i(c(a.name),1)]),_:2},1032,["value"]))),128))])]),_:1},8,["modelValue"])])):(s(),p("div",Ql,[...e[82]||(e[82]=[o("p",null,"沒有可選成員",-1)])]))])])]),_:1}),l(k,{label:"當前使用者",name:"current"},{default:t(()=>[...e[83]||(e[83]=[o("div",{class:"flex h-72 items-center justify-center"},"沒有可選成員",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),l(ne,{modelValue:n(O),"onUpdate:modelValue":e[36]||(e[36]=a=>x(O)?O.value=a:null),width:"800"},{header:t(()=>[...e[86]||(e[86]=[o("div",{class:"flex flex-col items-start mb-4"},[o("span",{class:"text-lg font-bold text-gray-500 mb-2"},"部門清單"),o("hr",{class:"w-full border-t border-gray-300"})],-1)])]),footer:t(()=>[o("div",El,[l(v,{onClick:e[34]||(e[34]=a=>O.value=!1)},{default:t(()=>[...e[89]||(e[89]=[i("取消",-1)])]),_:1}),l(v,{type:"primary",onClick:e[35]||(e[35]=a=>O.value=!1)},{default:t(()=>[...e[90]||(e[90]=[i(" 確定 ",-1)])]),_:1})])]),default:t(()=>[o("div",Fl,[n(te)?(s(),U(_,{key:0,closable:"",type:"primary",onClose:e[31]||(e[31]=a=>te.value=null)},{default:t(()=>[i(c(n(te)),1)]),_:1})):w("",!0)]),l(y,{modelValue:n(R),"onUpdate:modelValue":e[32]||(e[32]=a=>x(R)?R.value=a:null),placeholder:"輸入關鍵字",clearable:""},{prefix:t(()=>[...e[87]||(e[87]=[o("i",{class:"ri-search-line"},null,-1)])]),_:1},8,["modelValue"]),l(X,{modelValue:n(B),"onUpdate:modelValue":e[33]||(e[33]=a=>x(B)?B.value=a:null),class:"demo-tabs mx-2",onTabClick:ge},{default:t(()=>[l(k,{label:"成員",name:"member"},{default:t(()=>[o("div",jl,[l(we,{ref_key:"treeRef",ref:ie,class:"filter-tree",data:n(ye),"default-expand-all":"","highlight-current":!0,"filter-node-method":ve,onNodeClick:He},null,8,["data"])])]),_:1}),l(k,{label:"當前使用者所處部門",name:"current"},{default:t(()=>[...e[88]||(e[88]=[o("div",{class:"flex h-72 items-center justify-center"},"沒有可選部門",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),l(ne,{modelValue:n(ee),"onUpdate:modelValue":e[37]||(e[37]=a=>x(ee)?ee.value=a:null),width:"45%"},{header:t(()=>[...e[91]||(e[91]=[o("div",{class:"flex flex-col items-start mb-4"},[o("span",{class:"text-lg font-bold text-gray-500 mb-2"},"貼上新增"),o("hr",{class:"w-full border-t border-gray-300"})],-1)])]),default:t(()=>[e[92]||(e[92]=o("ul",{class:"list-disc pl-5 space-y-1 mb-4"},[o("li",null," 使用快捷鍵 ctrl + v 可將Excel內容貼上到表格中，也可直接編輯表格內容，使用 ctrl + z 撤銷貼上操作 "),o("li",null,[i(" 批次貼上時，"),o("strong",null,"將跳過不可編輯欄位"),i("，貼上資料將順延至下一列，請注意對應欄位順序 ")]),o("li",null,"當前子表單總行數不可超過200行")],-1)),l(be,{data:n(z),"header-cell-style":{backgroundColor:"#f5f7f8",color:"#606266",fontWeight:"bold"},class:"mb-4",border:"",onPaste:Ve,"empty-text":"Ctrl+v"},{default:t(()=>[(s(!0),p(P,null,N(n(ce),a=>(s(),U(D,{key:a.prop,prop:a.prop,label:a.label,width:a.minWidth||null,align:a.align,"header-align":a.headerAlign},null,8,["prop","label","width","align","header-align"]))),128))]),_:1},8,["data"])]),_:1},8,["modelValue"])])}}},Xl=Xe(ql,[["__scopeId","data-v-8361e5ed"]]);export{Xl as default};
