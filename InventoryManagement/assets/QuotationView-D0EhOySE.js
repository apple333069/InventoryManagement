import{M as D}from"./ManageTable-CLoVzGHA.js";import{_ as Ne,r as s,o as Qe,a as Ue,A as Ie,y as Me,L as Ee,b as y,d as u,k as l,i as z,w as t,j as p,u as r,e as o,l as h,m as d,v as f,F as U,q as I,h as T,z as Oe}from"./index-DuMLqF1m.js";const $e={class:"flex flex-col space-y-4"},qe={key:0},Be={class:"p-8 bg-white rounded-t-md shadow max-h-[82vh] overflow-y-auto"},Le={class:"w-full"},je={class:"flex space-x-2 justify-center"},Ye={class:"group-hover:hidden"},He={class:"group-hover:block hidden"},Ke={class:"grid grid-cols-3 gap-2 items-center"},Fe={class:"col-span-1 mt-1"},ze={class:"editTable mt-2"},Xe={class:"p-4 bg-white rounded-b-md shadow text-center mt-auto border-t"},Ge={key:1,class:"p-2 bg-white rounded-md shadow min-h-[88vh] overflow-auto"},Je={key:2,class:"p-2 bg-white rounded-md shadow min-h-[88vh] overflow-auto"},Ze={key:3,class:"p-2 bg-white rounded-md shadow min-h-[88vh] overflow-auto"},el={key:4,class:"p-2 bg-white rounded-md shadow min-h-[88vh] overflow-auto"},ll={class:"flex justify-end mb-2"},tl={class:"p-2 min-h-12 mb-2 border border-dashed border-gray-300 flex items-center"},al={class:"grid grid-cols-2"},ol={class:"h-72 min-h-72 overflow-y-auto border-r-2"},rl={class:"pl-4 h-72"},nl={key:0},dl={class:"flex flex-col"},sl={key:1,class:"flex h-72 items-center justify-center"},il={class:"dialog-footer border-t pt-4"},ul={class:"p-2 min-h-12 mb-2 border border-dashed border-gray-300 flex items-center"},pl={class:"h-72 min-h-72 overflow-y-auto"},ml={class:"dialog-footer border-t pt-4"},bl={__name:"QuotationView",setup(cl){const W=s("add"),S=s(!1),P=s("1"),M=s("");s("");const X=s(""),B=s(""),G=s(null),L=s(!1),E=s([]),J=s([]),C=s(!1),R=s(!1),A=s("member"),k=s(""),Z=s(null),j=s([]),O=s(null),$=s(null),Y=s(null),fe=n=>{const V=n.clipboardData.getData("text/plain");if(!V)return;if(V.includes('"')){alert("貼上的數據格式錯誤！"),n.preventDefault();return}J.value.push([...E.value]);const te=V.trim().split(`
`).map(ae=>{const g=ae.split("	"),i={};return ie.value.forEach((b,oe)=>{i[b.prop]=g[oe]||""}),i});E.value=[...E.value,...te]},se=n=>{n.ctrlKey&&n.key==="z"&&(J.value.length>0?E.value=J.value.pop():console.log("沒有更多的歷史數據可以復原"))};Qe(()=>{document.addEventListener("keydown",se);const n=new Date;B.value=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`}),Ue(()=>{document.removeEventListener("keydown",se)});const ee=Ie([{pdName:"暫無內容",pdCode:"暫無內容",brand:"暫無內容",model:"暫無內容",unit:"暫無內容",availableStockQty:"暫無內容",saleQty:"",sellingPrice:"",vatRate:"暫無內容",sellingPriceExTax:"暫無內容",pdOriginalPrice:"暫無內容",actualPrice:"暫無內容",pdTotalAmount:"暫無內容",actualPriceExclTax:"暫無內容",pdTotalAmountExclTax:"暫無內容"}]),ge=()=>{ee.push({pdName:"暫無內容",pdCode:"暫無內容",brand:"暫無內容",model:"暫無內容",unit:"暫無內容",availableStockQty:"暫無內容",saleQty:"",sellingPrice:"",vatRate:"暫無內容",sellingPriceExTax:"暫無內容",pdOriginalPrice:"暫無內容",actualPrice:"暫無內容",pdTotalAmount:"暫無內容",actualPriceExclTax:"暫無內容",pdTotalAmountExclTax:"暫無內容"})},he=n=>{ElMessageBox.confirm("確定要刪除這筆資料嗎？","提示",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then(()=>{ee.splice(n,1)}).catch(()=>{})},v=s({customerName:"",customerID:"",quoteDate:"",customerType:"",priceLevel:"",contactName:"",contactPhone:"",quoteID:""}),ve=s([{prop:"customerName",label:"客戶名稱",minWidth:100},{prop:"customerID",label:"客戶編碼",minWidth:100},{prop:"orderDate",label:"訂單簽訂日期",minWidth:120},{prop:"totalAmount",label:"訂單金額合計/元",minWidth:130},{prop:"status",label:"審批結果",minWidth:150},{prop:"salesPerson",label:"銷售負責人",minWidth:100},{prop:"products",label:"產品明細",headerAlign:"center",children:[{prop:"pdName",label:"產品名稱",minWidth:180},{prop:"pdCode",label:"產品編碼",minWidth:150},{prop:"brand",label:"品牌",minWidth:100},{prop:"model",label:"規格型號",minWidth:150},{prop:"unit",label:"單位",minWidth:100},{prop:"unitPrice",label:"銷售價格/元",minWidth:150,align:"right",headerAlign:"left"},{prop:"totalPrice",label:"採購單價/元",minWidth:150,align:"right",headerAlign:"left"},{prop:"vatRate",label:"增值稅稅率%",minWidth:120,align:"right",headerAlign:"left"},{prop:"count",label:"數量",align:"right",headerAlign:"left"},{prop:"totalPrice",label:"產品價格合計/元",minWidth:150,align:"right",headerAlign:"left"},{prop:"totalCost",label:"產品成本合計/元",minWidth:150,align:"right",headerAlign:"left"}]}]),ye=s([{customerID:"KH230424-01",customerName:"王小明",orderDate:"2024/01/15",totalAmount:5e4,status:"審批通過",salesPerson:"張大華",products:[{pdCode:"A001",pdName:"手機",brand:"華為",model:"P40 Pro",unit:"部",unitPrice:15e3,totalPrice:15e3,vatRate:5,count:3,totalCost:42e3},{pdCode:"A002",pdName:"耳機",brand:"Sony",model:"WH-1000XM5",unit:"副",unitPrice:6e3,totalPrice:6e3,vatRate:5,count:2,totalCost:11e3}]},{customerID:"KH230424-02",customerName:"李小華",orderDate:"2024/02/20",totalAmount:8e4,status:"待審批",salesPerson:"王美玲",products:[{pdCode:"B001",pdName:"筆記型電腦",brand:"蘋果",model:"MacBook Pro",unit:"台",unitPrice:4e4,totalPrice:4e4,vatRate:5,count:2,totalCost:75e3}]},{customerID:"KH230424-03",customerName:"蔡中興",orderDate:"2024/03/10",totalAmount:12e3,status:"已拒絕",salesPerson:"林建明",products:[{pdCode:"C001",pdName:"智慧手錶",brand:"Samsung",model:"Galaxy Watch 5",unit:"個",unitPrice:6e3,totalPrice:6e3,vatRate:5,count:2,totalCost:1e4}]}]),_=s([{prop:"orderName",label:"銷售訂單名稱",minWidth:120},{prop:"orderID",label:"銷售訂單編號",minWidth:120},{prop:"customerName",label:"客戶名稱",minWidth:120},{prop:"customerID",label:"客戶編碼",minWidth:120},{prop:"contactName",label:"客戶聯繫人姓名",minWidth:130},{prop:"contactPhone",label:"客戶聯繫人手機",minWidth:130},{prop:"salesPerson",label:"銷售負責人",minWidth:120},{prop:"salesDepartment",label:"銷售歸屬部門",minWidth:120},{prop:"quoteDate",label:"報價申請日期",minWidth:130},{prop:"salesReturnID",label:"銷售報價單編號",minWidth:130},{prop:"returnReason",label:"報價原因",minWidth:100},{prop:"returnWarehouse",label:"報價倉庫",minWidth:100},{prop:"pdReturnDetails",label:"報價產品明細",headerAlign:"left",children:[{prop:"pdName",label:"產品名稱",minWidth:180},{prop:"pdCode",label:"產品編碼",minWidth:150},{prop:"brand",label:"品牌",minWidth:100},{prop:"model",label:"規格型號",minWidth:100},{prop:"unit",label:"單位",minWidth:100},{prop:"saleQty",label:"銷售數量",minWidth:100,align:"right",headerAlign:"left"},{prop:"outStockQty",label:"已出庫-可退換數量",minWidth:150,align:"right",headerAlign:"left"},{prop:"outReturnQty",label:"已出庫-報價數量",minWidth:150,align:"right",headerAlign:"left"},{prop:"storageLocation",label:"入庫倉位",minWidth:100,align:"right",headerAlign:"left"},{prop:"outReturnValid",label:"已出庫-報價校驗",minWidth:150,align:"right",headerAlign:"left"},{prop:"notOutStockQty",label:"未出庫-可報價數量",minWidth:150,align:"right",headerAlign:"left"},{prop:"notOutReturnQty",label:"未出庫-報價數量",minWidth:150,align:"right",headerAlign:"left"},{prop:"notOutReturnValid",label:"未出庫-報價校驗",minWidth:150,align:"right",headerAlign:"left"},{prop:"totalReturnQty",label:"本次報價總數",minWidth:150,align:"right",headerAlign:"left"},{prop:"actualPrice",label:"實際售價(含稅)/元",minWidth:150,align:"right",headerAlign:"left"},{prop:"outStockTotalPrice",label:"已出庫-產品售價總價(含稅)/元",minWidth:200,align:"right",headerAlign:"left"},{prop:"pdTotalAmount",label:"產品售價合計(含稅)/元",minWidth:180,align:"right",headerAlign:"left"},{prop:"costPrice",label:"成本單價/元",minWidth:150,align:"right",headerAlign:"left"},{prop:"outTotalCost",label:"已出庫-產品成本合計/元",minWidth:180,align:"right",headerAlign:"left"},{prop:"totalCost",label:"產品成本合計/元",minWidth:150,align:"right",headerAlign:"left"},{prop:"actualPriceExclTax",label:"實際售價(不含稅)/元",minWidth:180,align:"right",headerAlign:"left"}]},{prop:"outReturnTotalQty",label:"已出庫-報價產品總數",minWidth:100},{prop:"outReturnTotalPrice",label:"已出庫-報價產品售價總額(含稅)/元",minWidth:180,align:"right",headerAlign:"left"},{prop:"outReturnTotalCost",label:"已出庫-報價產品成本總額/元",minWidth:180,align:"right",headerAlign:"left"},{prop:"returnTotalQty",label:"報價產品總數",minWidth:110,align:"right",headerAlign:"left"},{prop:"returnTotalPrice",label:"報價產品售價總額(含稅)/元",minWidth:180,align:"right",headerAlign:"left"},{prop:"returnTotalCost",label:"報價產品成本總額/元",minWidth:180,align:"right",headerAlign:"left"},{prop:"handler",label:"經辦人員",minWidth:100},{prop:"handlerDepartment",label:"經辦人員歸屬部門",minWidth:100},{prop:"approverStatus",label:"審批結果",minWidth:100,slot:"approverStatus"},{prop:"approver",label:"審批人員",minWidth:100},{prop:"approverDepartment",label:"審批人員歸屬部門",minWidth:100},{prop:"approvalTime",label:"審批時間",minWidth:150},{prop:"rejectionReason",label:"不通過原因",minWidth:100},{prop:"inspectionResult",label:"報價產品收穫檢驗",minWidth:100},{prop:"warehouseStaff",label:"入庫人員",minWidth:100},{prop:"warehouseDepartment",label:"倉管歸屬部門",minWidth:120},{prop:"inspectionTime",label:"檢驗時間",minWidth:150},{prop:"refusalReason",label:"拒收原因",minWidth:100},{prop:"submitter",label:"送出人",minWidth:80},{prop:"submitTime",label:"送出時間",minWidth:150},{prop:"updateTime",label:"更新時間",minWidth:150},{prop:"processStatus",label:"流程狀態",minWidth:100,slot:"processStatus"},{prop:"currentNode",label:"當前節點",minWidth:100},{prop:"currentResponsible",label:"當前負責人",minWidth:80}]),N=s([{orderName:"訂單1",orderID:"ORD123456",customerName:"王小明",customerID:"KH230420-01",contactName:"王小明",contactPhone:"0912345678",salesPerson:"張大華",salesDepartment:"北區銷售部",quoteDate:"2024/01/15",salesReturnID:"TXS230918-01",returnReason:"產品損壞",returnWarehouse:"北區倉庫",pdName:"手機",pdCode:"A001",brand:"華為",model:"P40 Pro",unit:"部",saleQty:3,outStockQty:2,outReturnQty:1,storageLocation:"A1",outReturnValid:0,notOutStockQty:1,notOutReturnQty:0,notOutReturnValid:0,totalReturnQty:1,actualPrice:15e3,outStockTotalPrice:3e4,pdTotalAmount:45e3,costPrice:12e3,outTotalCost:24e3,totalCost:36e3,actualPriceExclTax:14286,outReturnTotalQty:1,outReturnTotalPrice:15e3,outReturnTotalCost:12e3,returnTotalQty:1,returnTotalPrice:15e3,returnTotalCost:12e3,handler:"李四",handlerDepartment:"北區銷售部",approverStatus:"審批通過",approver:"王五",approverDepartment:"北區銷售部",approvalTime:"2024/01/16",rejectionReason:"",inspectionResult:"合格",warehouseStaff:"趙六",warehouseDepartment:"北區倉庫",inspectionTime:"2024/01/17",refusalReason:"",submitter:"李四",submitTime:"2024/01/15",updateTime:"2024/01/18",processStatus:"完成",currentNode:"結束",currentResponsible:"無"},{orderName:"訂單2",orderID:"ORD123457",customerName:"李小華",customerID:"KH230424-02",contactName:"張小華",contactPhone:"0923456789",salesPerson:"陳美芳",salesDepartment:"南區銷售部",quoteDate:"2024/01/15",salesReturnID:"TXS230918-02",returnReason:"品質問題",returnWarehouse:"南區倉庫",pdName:"筆記型電腦",pdCode:"B001",brand:"蘋果",model:"MacBook Pro",unit:"台",saleQty:2,outStockQty:1,outReturnQty:1,storageLocation:"B1",outReturnValid:0,notOutStockQty:1,notOutReturnQty:0,notOutReturnValid:0,totalReturnQty:1,actualPrice:4e4,outStockTotalPrice:4e4,pdTotalAmount:8e4,costPrice:35e3,outTotalCost:35e3,totalCost:7e4,actualPriceExclTax:38095,outReturnTotalQty:1,outReturnTotalPrice:4e4,outReturnTotalCost:35e3,returnTotalQty:1,returnTotalPrice:4e4,returnTotalCost:35e3,handler:"王六",handlerDepartment:"南區銷售部",approverStatus:"待審批",approver:"李七",approverDepartment:"南區銷售部",approvalTime:"",rejectionReason:"",inspectionResult:"",warehouseStaff:"趙八",warehouseDepartment:"南區倉庫",inspectionTime:"",refusalReason:"",submitter:"王六",submitTime:"2024/01/15",updateTime:"2024/01/18",processStatus:"進行中",currentNode:"審批",currentResponsible:"李七"}]),ie=s([{prop:"outReturnQty",label:"已出庫-報價數量"},{prop:"notOutReturnQty",label:"未出庫-報價數量"}]),xe=n=>{v.value={...n},S.value=!1},we=Me(()=>ye.value.filter(n=>!M.value||n.name.toLowerCase().includes(M.value.toLowerCase()))),Q=n=>{switch(n){case"審批通過":return"success";case"待審批":return"warning";case"已拒絕":return"danger";default:return"info"}},q=n=>{switch(n){case"完成":return"success";case"進行中":return"primary";case"已停止":return"danger";default:return"info"}},Ve=n=>{switch(n){case"出庫":return"success";case"計畫出庫":return"warning";case"庫存凍結":return"danger";default:return"info"}},ue=(n,e)=>{};Ee(k,function(n){Z.value.filter(n)});const pe=(n,e)=>n?e.label.includes(n):!0,_e=n=>{j.value=We(n.id),O.value=null,$.value=null},De=n=>{Y.value=n.label},We=n=>({101:[{id:"1",name:"張三"},{id:"2",name:"李四"}],201:[{id:"3",name:"王五"},{id:"4",name:"趙六"}],202:[{id:"5",name:"小明"},{id:"6",name:"小紅"}]})[n]||[],me=s([{id:1,label:"軟件有限公司",children:[{id:"101",label:"生產部"},{id:"102",label:"銷售部",children:[{id:"201",label:"銷售一部"},{id:"202",label:"銷售二部"}]},{id:"103",label:"研發部"},{id:"104",label:"市場部"},{id:"105",label:"採購部"},{id:"106",label:"財務部"}]}]),ke=n=>{$.value=j.value.find(e=>e.id===n)};return(n,e)=>{const V=p("el-option"),le=p("el-select"),te=p("el-col"),ae=p("el-row"),g=p("el-button"),i=p("el-form-item"),b=p("el-input"),oe=p("el-date-picker"),re=p("el-form"),H=p("el-dropdown-item"),Te=p("el-dropdown-menu"),Se=p("el-dropdown"),m=p("el-table-column"),ne=p("el-table"),x=p("el-tag"),w=p("el-tab-pane"),K=p("el-tabs"),Pe=p("el-tooltip"),be=p("el-radio"),F=p("el-dialog"),ce=p("el-tree"),Ce=p("el-radio-group");return u(),y("main",$e,[l(ae,{class:"p-3 bg-white rounded-md shadow flex justify-end md:justify-start"},{default:t(()=>[l(te,{span:5},{default:t(()=>[l(le,{modelValue:r(W),"onUpdate:modelValue":e[0]||(e[0]=a=>h(W)?W.value=a:null),placeholder:"請選擇"},{default:t(()=>[l(V,{label:"發起流程",value:"add"}),l(V,{label:"添加並管理本人流程",value:"selfManage"}),l(V,{label:"添加並管理流程",value:"manage"}),l(V,{label:"查看全部流程",value:"view"}),l(V,{label:"全部有限權的資料",value:"restricted"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),r(W)==="add"?(u(),y("div",qe,[o("div",Be,[e[47]||(e[47]=o("h2",{class:"text-lg font-bold text-primary border-b-4 border-blue-100"}," 客戶基本資料 ",-1)),e[48]||(e[48]=o("p",{class:"text-sm text-gray-500"}," 報價單未作為銷售訂單的原數據，如有需求，可通過關聯數據配置 ",-1)),l(re,{"label-position":"top",class:"grid grid-cols-1 xl:grid-cols-3 gap-x-16 py-7 px-2 font-bold"},{default:t(()=>[l(i,{label:"選擇客戶",required:!0},{default:t(()=>[l(g,{class:"w-3/4",onClick:e[1]||(e[1]=a=>S.value=!0)},{default:t(()=>[...e[34]||(e[34]=[o("i",{class:"ri-database-2-line mr-1"},null,-1),d("選擇資料",-1)])]),_:1})]),_:1}),l(i,{label:"客戶名稱"},{default:t(()=>[l(b,{modelValue:r(v).customerName,"onUpdate:modelValue":e[2]||(e[2]=a=>r(v).customerName=a),disabled:"",placeholder:"暫無內容"},null,8,["modelValue"])]),_:1}),l(i,{label:"客戶編碼"},{default:t(()=>[l(b,{modelValue:r(v).customerID,"onUpdate:modelValue":e[3]||(e[3]=a=>r(v).customerID=a),disabled:"",placeholder:"暫無內容"},null,8,["modelValue"])]),_:1}),l(i,{label:"報價日期",class:"w-3/4"},{default:t(()=>[l(oe,{modelValue:r(B),"onUpdate:modelValue":e[4]||(e[4]=a=>h(B)?B.value=a:null),type:"date",style:{width:"100%"},format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),l(i,{label:"客戶分類"},{default:t(()=>[l(b,{modelValue:r(v).customerType,"onUpdate:modelValue":e[5]||(e[5]=a=>r(v).customerType=a),disabled:"",placeholder:"暫無內容"},null,8,["modelValue"])]),_:1}),l(i,{label:"價格等級"},{default:t(()=>[l(b,{modelValue:r(v).priceLevel,"onUpdate:modelValue":e[6]||(e[6]=a=>r(v).priceLevel=a),disabled:"",placeholder:"暫無內容"},null,8,["modelValue"])]),_:1}),l(i,{label:"客戶聯繫人姓名"},{default:t(()=>[l(b,{modelValue:r(v).contactName,"onUpdate:modelValue":e[7]||(e[7]=a=>r(v).contactName=a),disabled:"",placeholder:"暫無內容"},null,8,["modelValue"])]),_:1}),l(i,{label:"客戶聯繫人手機"},{default:t(()=>[l(b,{modelValue:r(v).contactPhone,"onUpdate:modelValue":e[8]||(e[8]=a=>r(v).contactPhone=a),disabled:"",placeholder:"暫無內容"},null,8,["modelValue"])]),_:1}),l(i,{label:"報價單編號",class:"w-3/4"},{default:t(()=>[l(b,{modelValue:r(v).quoteID,"onUpdate:modelValue":e[9]||(e[9]=a=>r(v).quoteID=a),disabled:"",placeholder:"自動生成無需填寫"},null,8,["modelValue"])]),_:1}),l(i,{label:"銷售負責人"},{default:t(()=>[l(g,{class:"w-full",onClick:e[10]||(e[10]=a=>C.value=!0)},{default:t(()=>[...e[35]||(e[35]=[o("i",{class:"ri-add-line text-lg"},null,-1),d("選擇成員",-1)])]),_:1})]),_:1}),l(i,{label:"銷售歸屬部門"},{default:t(()=>[l(g,{class:"w-full",onClick:e[11]||(e[11]=a=>R.value=!0)},{default:t(()=>[...e[36]||(e[36]=[o("i",{class:"ri-add-line text-lg"},null,-1),d("選擇部門",-1)])]),_:1})]),_:1})]),_:1}),e[49]||(e[49]=o("h2",{class:"text-lg font-bold text-primary border-b-4 border-blue-100"}," 報價單明細 ",-1)),e[50]||(e[50]=o("p",{class:"text-sm text-gray-500"}," 請選擇需要報價的產品，並在選擇完畢後填寫銷售數量！銷售單價默認連動上方價格等級價格！ ",-1)),e[51]||(e[51]=o("p",{class:"text-sm text-primary"}," 毛利率低於35%，不允許通過！ ",-1)),l(re,{"label-position":"top",class:"grid grid-cols-1 xl:grid-cols-3 gap-x-16 py-7 px-2 font-bold"},{default:t(()=>[l(i,{label:"出貨倉庫",required:!0},{default:t(()=>[l(le,{modelValue:r(X),"onUpdate:modelValue":e[12]||(e[12]=a=>h(X)?X.value=a:null),placeholder:"請選擇出貨倉庫",class:"w-full",clearable:"",filterable:"",remote:"","reserve-keyword":"","remote-show-suffix":"","no-match-text":"沒有符合的數據","no-data-text":"沒有可選擇的數據"},{default:t(()=>[l(V,{label:"A倉庫",value:"1"}),l(V,{label:"B倉庫",value:"2"})]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"產品需求明細",class:"xl:col-span-3",required:!0},{default:t(()=>[o("div",Le,[l(ne,{data:r(ee),"header-cell-style":{backgroundColor:"#f5f7f8",color:"#606266",fontWeight:"bold"},"cell-style":{color:"#9ca3af"},"row-class-name":()=>"group",border:"","empty-text":"暫無資料"},{default:t(()=>[l(m,{label:"",width:"80",fixed:""},{default:t(a=>[o("div",je,[o("span",Ye,f(a.$index+1),1),o("div",He,[o("div",Ke,[l(g,{class:"col-span-1 col-start-2",type:"danger",link:"",onClick:c=>he(a.$index)},{default:t(()=>[...e[37]||(e[37]=[o("i",{class:"ri-delete-bin-line text-lg"},null,-1)])]),_:1},8,["onClick"]),o("div",Fe,[l(Se,{trigger:"click",placement:"bottom-start"},{dropdown:t(()=>[l(Te,null,{default:t(()=>[l(H,null,{default:t(()=>[...e[39]||(e[39]=[d("複製到下一行",-1)])]),_:1}),l(H,null,{default:t(()=>[...e[40]||(e[40]=[d("複製到最後一行",-1)])]),_:1}),l(H,null,{default:t(()=>[...e[41]||(e[41]=[d("向上插入行",-1)])]),_:1}),l(H,null,{default:t(()=>[...e[42]||(e[42]=[d("向下插入行",-1)])]),_:1})]),_:1})]),default:t(()=>[l(g,{link:"",type:"primary"},{default:t(()=>[...e[38]||(e[38]=[o("i",{class:"ri-more-2-fill"},null,-1)])]),_:1})]),_:1})])])])])]),_:1}),l(m,{label:"選擇產品",width:"100",fixed:""},{default:t(()=>[l(g,{onClick:e[13]||(e[13]=a=>S.value=!0)},{default:t(()=>[...e[43]||(e[43]=[o("i",{class:"ri-database-2-line"},null,-1)])]),_:1})]),_:1}),l(m,{prop:"pdName",label:"產品名稱",width:"100",fixed:""}),l(m,{prop:"pdCode",label:"產品編碼",width:"100"}),l(m,{prop:"brand",label:"品牌",width:"100"}),l(m,{prop:"model",label:"規格型號",width:"100"}),l(m,{prop:"unit",label:"單位",width:"100"}),l(m,{prop:"availableStockQty",label:"當前可用庫存數量",width:"150"}),l(m,{label:"銷售數量",width:"150"},{default:t(a=>[l(b,{modelValue:a.row.saleQty,"onUpdate:modelValue":c=>a.row.saleQty=c,placeholder:"輸入數量",type:"number",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(m,{label:"銷售單價(含稅)/元",width:"150"},{default:t(a=>[l(b,{modelValue:a.row.sellingPrice,"onUpdate:modelValue":c=>a.row.sellingPrice=c,placeholder:"輸入數量",type:"number",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(m,{prop:"vatRate",label:"增值稅稅率 %",width:"150"}),l(m,{prop:"sellingPriceExTax",label:"銷售單價(不含稅)/元",width:"150"}),l(m,{prop:"pdOriginalPrice",label:"產品原價合計(含稅)/元",width:"150"}),l(m,{prop:"actualPrice",label:"實際售價(含稅)/元",width:"150"}),l(m,{prop:"pdTotalAmount",label:"產品售價合計(含稅)/元",width:"150"}),l(m,{prop:"actualPriceExclTax",label:"實際售價(不含稅)/元",width:"150"}),l(m,{prop:"pdTotalAmountExclTax",label:"產品售價合計(不含稅)/元",width:"150"})]),_:1},8,["data"]),o("div",ze,[l(g,{type:"primary",text:"",onClick:ge},{default:t(()=>[...e[44]||(e[44]=[o("i",{class:"ri-add-line text-lg pr-1"},null,-1),d("新增",-1)])]),_:1}),l(g,{type:"primary",text:"",onClick:e[14]||(e[14]=a=>L.value=!0)},{default:t(()=>[...e[45]||(e[45]=[o("i",{class:"ri-file-edit-line text-lg pr-1"},null,-1),d("貼上新增",-1)])]),_:1})])])]),_:1})]),_:1}),l(re,{"label-position":"top",class:"grid grid-cols-1 xl:grid-cols-3 gap-x-16 pb-6 px-2 font-bold"},{default:t(()=>[l(i,{label:"銷售原價總額(含稅)/元"},{default:t(()=>[l(b,{disabled:"",placeholder:"暫無內容"})]),_:1}),l(i,{label:"優惠金額/元"},{default:t(()=>[e[46]||(e[46]=o("p",{class:"text-xs text-gray-400 pb-1"},"優惠金額默認按金額比例，均攤到各產品",-1)),l(b)]),_:1}),l(i,{label:"整單折扣率 %",required:!0},{default:t(()=>[l(b,{disabled:"",placeholder:"暫無內容"})]),_:1}),l(i,{label:"銷售訂單金額(含稅)/元"},{default:t(()=>[l(b,{disabled:"",placeholder:"暫無內容"})]),_:1}),l(i,{label:"金額大寫"},{default:t(()=>[l(b,{disabled:"",placeholder:"暫無內容"})]),_:1}),l(i,{label:"報價毛利率 %",required:!0},{default:t(()=>[l(b,{disabled:"",placeholder:"暫無內容"})]),_:1})]),_:1})]),o("div",Xe,[l(g,{type:"primary"},{default:t(()=>[...e[52]||(e[52]=[d("送出",-1)])]),_:1})])])):r(W)==="selfManage"?(u(),y("div",Ge,[l(K,{modelValue:r(P),"onUpdate:modelValue":e[15]||(e[15]=a=>h(P)?P.value=a:null)},{default:t(()=>[l(w,{name:"1"},{label:t(()=>[...e[53]||(e[53]=[o("span",{class:"custom-tabs-label"},[o("i",{class:"ri-table-line mr-1"}),o("span",null,"全部報價")],-1)])]),default:t(()=>[l(D,{tableData:r(N),columns:r(_)},{approverStatus:t(({row:a})=>[l(x,{type:Q(a.approverStatus),effect:"dark"},{default:t(()=>[d(f(a.approverStatus),1)]),_:2},1032,["type"])]),processStatus:t(({row:a})=>[l(x,{type:q(a.processStatus)},{default:t(()=>[d(f(a.processStatus),1)]),_:2},1032,["type"])]),_:1},8,["tableData","columns"])]),_:1}),l(w,{name:"2"},{label:t(()=>[...e[54]||(e[54]=[o("span",{class:"custom-tabs-label"},[o("i",{class:"ri-table-line mr-1"}),o("span",null,"待審批報價")],-1)])]),default:t(()=>[l(D,{tableData:[],columns:r(_)},null,8,["columns"])]),_:1}),l(w,{name:"3"},{label:t(()=>[...e[55]||(e[55]=[o("span",{class:"custom-tabs-label"},[o("i",{class:"ri-table-line mr-1"}),o("span",null,"已審批報價")],-1)])]),default:t(()=>[l(D,{tableData:r(N),columns:r(_)},{approverStatus:t(({row:a})=>[l(x,{type:Q(a.approverStatus),effect:"dark"},{default:t(()=>[d(f(a.approverStatus),1)]),_:2},1032,["type"])]),processStatus:t(({row:a})=>[l(x,{type:q(a.processStatus)},{default:t(()=>[d(f(a.processStatus),1)]),_:2},1032,["type"])]),_:1},8,["tableData","columns"])]),_:1}),l(w,{name:"4"},{label:t(()=>[...e[56]||(e[56]=[o("span",{class:"custom-tabs-label"},[o("i",{class:"ri-table-line mr-1"}),o("span",null,"不通過報價")],-1)])]),default:t(()=>[l(D,{tableData:[],columns:r(_)},null,8,["columns"])]),_:1})]),_:1},8,["modelValue"])])):r(W)==="manage"?(u(),y("div",Je,[l(K,{modelValue:r(P),"onUpdate:modelValue":e[16]||(e[16]=a=>h(P)?P.value=a:null)},{default:t(()=>[l(w,{name:"1"},{label:t(()=>[...e[57]||(e[57]=[o("span",{class:"custom-tabs-label"},[o("i",{class:"ri-table-line mr-1"}),o("span",null,"全部報價")],-1)])]),default:t(()=>[l(D,{tableData:r(N),columns:r(_)},{approverStatus:t(({row:a})=>[l(x,{type:Q(a.approverStatus),effect:"dark"},{default:t(()=>[d(f(a.approverStatus),1)]),_:2},1032,["type"])]),processStatus:t(({row:a})=>[l(x,{type:q(a.processStatus)},{default:t(()=>[d(f(a.processStatus),1)]),_:2},1032,["type"])]),_:1},8,["tableData","columns"])]),_:1}),l(w,{name:"2"},{label:t(()=>[...e[58]||(e[58]=[o("span",{class:"custom-tabs-label"},[o("i",{class:"ri-table-line mr-1"}),o("span",null,"待審批報價")],-1)])]),default:t(()=>[l(D,{tableData:[],columns:r(_)},null,8,["columns"])]),_:1}),l(w,{name:"3"},{label:t(()=>[...e[59]||(e[59]=[o("span",{class:"custom-tabs-label"},[o("i",{class:"ri-table-line mr-1"}),o("span",null,"已審批報價")],-1)])]),default:t(()=>[l(D,{tableData:r(N),columns:r(_)},{approverStatus:t(({row:a})=>[l(x,{type:Q(a.approverStatus),effect:"dark"},{default:t(()=>[d(f(a.approverStatus),1)]),_:2},1032,["type"])]),processStatus:t(({row:a})=>[l(x,{type:q(a.processStatus)},{default:t(()=>[d(f(a.processStatus),1)]),_:2},1032,["type"])]),_:1},8,["tableData","columns"])]),_:1}),l(w,{name:"4"},{label:t(()=>[...e[60]||(e[60]=[o("span",{class:"custom-tabs-label"},[o("i",{class:"ri-table-line mr-1"}),o("span",null,"不通過報價")],-1)])]),default:t(()=>[l(D,{tableData:[],columns:r(_)},null,8,["columns"])]),_:1})]),_:1},8,["modelValue"])])):r(W)==="view"?(u(),y("div",Ze,[l(D,{edit:!1,tableData:r(N),columns:r(_)},{approverStatus:t(({row:a})=>[l(x,{type:Q(a.approverStatus),effect:"dark"},{default:t(()=>[d(f(a.approverStatus),1)]),_:2},1032,["type"])]),processStatus:t(({row:a})=>[l(x,{type:q(a.processStatus)},{default:t(()=>[d(f(a.processStatus),1)]),_:2},1032,["type"])]),_:1},8,["tableData","columns"])])):r(W)==="restricted"?(u(),y("div",el,[l(D,{tableData:r(N),columns:r(_)},{outboundLabel:t(({row:a})=>[(u(!0),y(U,null,I(a.outboundLabel,(c,de)=>(u(),T(x,{key:de,type:Ve(c),effect:"dark",class:"mr-2"},{default:t(()=>[d(f(c),1)]),_:2},1032,["type"]))),128))]),_:1},8,["tableData","columns"])])):z("",!0),l(F,{modelValue:r(S),"onUpdate:modelValue":e[19]||(e[19]=a=>h(S)?S.value=a:null),width:"65%"},{header:t(()=>[...e[61]||(e[61]=[o("div",{class:"flex flex-col items-start mb-4"},[o("span",{class:"text-lg font-bold text-gray-500 mb-2"},"選擇資料"),o("hr",{class:"w-full border-t border-gray-300"})],-1)])]),default:t(()=>[o("div",ll,[o("div",null,[l(b,{modelValue:r(M),"onUpdate:modelValue":e[17]||(e[17]=a=>h(M)?M.value=a:null),placeholder:"輸入關鍵字",clearable:""},{prefix:t(()=>[...e[62]||(e[62]=[o("i",{class:"ri-search-line"},null,-1)])]),_:1},8,["modelValue"])]),o("div",null,[l(Pe,{content:"篩選條件",placement:"bottom","hide-after":10},{default:t(()=>[l(g,{text:""},{default:t(()=>[...e[63]||(e[63]=[o("i",{class:"ri-filter-line"},null,-1)])]),_:1})]),_:1})])]),l(ne,{data:r(we),"header-cell-style":{backgroundColor:"#f5f7f8",color:"#606266",fontWeight:"bold"},class:"mb-4",border:"",onRowClick:xe},{default:t(()=>[l(m,{align:"center",width:"55",fixed:""},{default:t(a=>[l(be,{label:a.row.orderID,modelValue:r(G),"onUpdate:modelValue":e[18]||(e[18]=c=>h(G)?G.value=c:null)},{default:t(()=>[...e[64]||(e[64]=[d(" ",-1)])]),_:1},8,["label","modelValue"])]),_:1}),(u(!0),y(U,null,I(r(ve),a=>(u(),T(m,{key:a.prop,prop:a.prop,label:a.label,width:a.minWidth||null,align:a.align,"header-align":a.headerAlign},Oe({default:t(()=>[a.children?(u(!0),y(U,{key:0},I(a.children,c=>(u(),T(m,{key:c.prop,prop:c.prop,label:c.label,"min-width":c.minWidth,align:c.align,"header-align":c.headerAlign},{default:t(({row:de})=>[(u(!0),y(U,null,I(de.products,(Re,Ae)=>(u(),y("div",{key:Ae},[o("div",null,f(Re[c.prop]),1)]))),128))]),_:2},1032,["prop","label","min-width","align","header-align"]))),128)):z("",!0)]),_:2},[a.prop==="status"?{name:"default",fn:t(({row:c})=>[l(x,{type:Q(c.status)},{default:t(()=>[d(f(c.status),1)]),_:2},1032,["type"])]),key:"0"}:void 0]),1032,["prop","label","width","align","header-align"]))),128))]),_:1},8,["data"])]),_:1},8,["modelValue"]),l(F,{modelValue:r(C),"onUpdate:modelValue":e[26]||(e[26]=a=>h(C)?C.value=a:null),width:"800"},{header:t(()=>[...e[65]||(e[65]=[o("div",{class:"flex flex-col items-start mb-4"},[o("span",{class:"text-lg font-bold text-gray-500 mb-2"},"成員列表"),o("hr",{class:"w-full border-t border-gray-300"})],-1)])]),footer:t(()=>[o("div",il,[l(g,{onClick:e[24]||(e[24]=a=>C.value=!1)},{default:t(()=>[...e[69]||(e[69]=[d("取消",-1)])]),_:1}),l(g,{type:"primary",onClick:e[25]||(e[25]=a=>C.value=!1)},{default:t(()=>[...e[70]||(e[70]=[d(" 確定 ",-1)])]),_:1})])]),default:t(()=>[o("div",tl,[r($)?(u(),T(x,{key:0,closable:"",type:"primary",onClose:e[20]||(e[20]=()=>{$.value=null,O.value=null})},{default:t(()=>[d(f(r($).name),1)]),_:1})):z("",!0)]),l(b,{modelValue:r(k),"onUpdate:modelValue":e[21]||(e[21]=a=>h(k)?k.value=a:null),placeholder:"輸入關鍵字",clearable:""},{prefix:t(()=>[...e[66]||(e[66]=[o("i",{class:"ri-search-line"},null,-1)])]),_:1},8,["modelValue"]),l(K,{modelValue:r(A),"onUpdate:modelValue":e[23]||(e[23]=a=>h(A)?A.value=a:null),class:"demo-tabs mx-2",onTabClick:ue},{default:t(()=>[l(w,{label:"成員",name:"member"},{default:t(()=>[o("div",al,[o("div",ol,[l(ce,{ref_key:"treeRef",ref:Z,style:{"max-width":"600px"},class:"filter-tree",data:r(me),"default-expand-all":"","highlight-current":!0,"filter-node-method":pe,onNodeClick:_e},null,8,["data"])]),o("div",rl,[r(j).length>0?(u(),y("div",nl,[l(Ce,{class:"flex flex-col",modelValue:r(O),"onUpdate:modelValue":e[22]||(e[22]=a=>h(O)?O.value=a:null),onChange:ke},{default:t(()=>[o("div",dl,[(u(!0),y(U,null,I(r(j),a=>(u(),T(be,{key:a.id,value:a.id},{default:t(()=>[d(f(a.name),1)]),_:2},1032,["value"]))),128))])]),_:1},8,["modelValue"])])):(u(),y("div",sl,[...e[67]||(e[67]=[o("p",null,"沒有可選成員",-1)])]))])])]),_:1}),l(w,{label:"當前使用者",name:"current"},{default:t(()=>[...e[68]||(e[68]=[o("div",{class:"flex h-72 items-center justify-center"},"沒有可選成員",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),l(F,{modelValue:r(R),"onUpdate:modelValue":e[32]||(e[32]=a=>h(R)?R.value=a:null),width:"800"},{header:t(()=>[...e[71]||(e[71]=[o("div",{class:"flex flex-col items-start mb-4"},[o("span",{class:"text-lg font-bold text-gray-500 mb-2"},"部門清單"),o("hr",{class:"w-full border-t border-gray-300"})],-1)])]),footer:t(()=>[o("div",ml,[l(g,{onClick:e[30]||(e[30]=a=>R.value=!1)},{default:t(()=>[...e[74]||(e[74]=[d("取消",-1)])]),_:1}),l(g,{type:"primary",onClick:e[31]||(e[31]=a=>R.value=!1)},{default:t(()=>[...e[75]||(e[75]=[d(" 確定 ",-1)])]),_:1})])]),default:t(()=>[o("div",ul,[r(Y)?(u(),T(x,{key:0,closable:"",type:"primary",onClose:e[27]||(e[27]=a=>Y.value=null)},{default:t(()=>[d(f(r(Y)),1)]),_:1})):z("",!0)]),l(b,{modelValue:r(k),"onUpdate:modelValue":e[28]||(e[28]=a=>h(k)?k.value=a:null),placeholder:"輸入關鍵字",clearable:""},{prefix:t(()=>[...e[72]||(e[72]=[o("i",{class:"ri-search-line"},null,-1)])]),_:1},8,["modelValue"]),l(K,{modelValue:r(A),"onUpdate:modelValue":e[29]||(e[29]=a=>h(A)?A.value=a:null),class:"demo-tabs mx-2",onTabClick:ue},{default:t(()=>[l(w,{label:"成員",name:"member"},{default:t(()=>[o("div",pl,[l(ce,{ref_key:"treeRef",ref:Z,class:"filter-tree",data:r(me),"default-expand-all":"","highlight-current":!0,"filter-node-method":pe,onNodeClick:De},null,8,["data"])])]),_:1}),l(w,{label:"當前使用者所處部門",name:"current"},{default:t(()=>[...e[73]||(e[73]=[o("div",{class:"flex h-72 items-center justify-center"},"沒有可選部門",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),l(F,{modelValue:r(L),"onUpdate:modelValue":e[33]||(e[33]=a=>h(L)?L.value=a:null),width:"45%"},{header:t(()=>[...e[76]||(e[76]=[o("div",{class:"flex flex-col items-start mb-4"},[o("span",{class:"text-lg font-bold text-gray-500 mb-2"},"貼上新增"),o("hr",{class:"w-full border-t border-gray-300"})],-1)])]),default:t(()=>[e[77]||(e[77]=o("ul",{class:"list-disc pl-5 space-y-1 mb-4"},[o("li",null," 使用快捷鍵 ctrl + v 可將Excel內容貼上到表格中，也可直接編輯表格內容，使用 ctrl + z 撤銷貼上操作 "),o("li",null,[d(" 批次貼上時，"),o("strong",null,"將跳過不可編輯欄位"),d("，貼上資料將順延至下一列，請注意對應欄位順序 ")]),o("li",null,"當前子表單總行數不可超過200行")],-1)),l(ne,{data:r(E),"header-cell-style":{backgroundColor:"#f5f7f8",color:"#606266",fontWeight:"bold"},class:"mb-4",border:"",onPaste:fe,"empty-text":"Ctrl+v"},{default:t(()=>[(u(!0),y(U,null,I(r(ie),a=>(u(),T(m,{key:a.prop,prop:a.prop,label:a.label,width:a.minWidth||null,align:a.align,"header-align":a.headerAlign},null,8,["prop","label","width","align","header-align"]))),128))]),_:1},8,["data"])]),_:1},8,["modelValue"])])}}},hl=Ne(bl,[["__scopeId","data-v-c005605f"]]);export{hl as default};
