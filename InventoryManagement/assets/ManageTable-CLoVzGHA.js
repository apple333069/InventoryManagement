import{_ as se,r as p,b as f,d as r,e as o,k as t,i as j,w as l,m as d,j as u,n as q,u as s,l as v,F as _,q as V,H as de,v as x,h as S,z as P,E as R,K as $}from"./index-DuMLqF1m.js";const ie={class:"flex justify-between"},ue={key:0,class:"flex items-center"},pe={key:1},fe=["src"],ge={class:"flex flex-col items-start mb-4"},me={class:"text-lg font-bold text-gray-500 mb-2"},be={class:"dialog-content"},ce={key:0},_e={class:"grid grid-cols-2 gap-5 p-2"},ye={key:0},ke={key:1,class:"col-span-2"},ve={__name:"ManageTable",props:{edit:{type:Boolean,default:!0},record:{type:Boolean,default:!1},tableData:{type:Array,required:!0},columns:{type:Array,required:!0},border:{type:Boolean,default:!0},headerCellStyle:{type:Object,default:()=>({backgroundColor:"#f5f7f8",color:"#606266",fontWeight:"bold"})}},setup(m){const E=m,F=p(3),U=p(10),L=p("default"),H=p(!1),K=p(!1),I=p(null),y=p(!1),O=()=>{console.log("items per page")},G=()=>{console.log("current page: ")},J=()=>{var i;document.fullscreenElement?(document.exitFullscreen(),y.value=!1):((i=I.value)==null||i.requestFullscreen(),y.value=!0)};document.addEventListener("fullscreenchange",()=>{y.value=!!document.fullscreenElement});const b=p(!1),N=p(""),w=p(null),Q=i=>{N.value=i.name,w.value=i,b.value=!0},X=()=>{w.value=null},Y=i=>{Q(i)},A=p(!1),D=p(!1),B=p([]),Z=i=>{B.value=i?E.columns.map(e=>e.prop):[],D.value=!1},ee=i=>{const e=i.length;A.value=e===E.columns.length,D.value=e>0&&e<E.columns.length};return(i,e)=>{const g=u("el-button"),c=u("el-dropdown-item"),C=u("el-dropdown-menu"),h=u("el-dropdown"),W=u("el-checkbox"),le=u("el-checkbox-group"),te=u("el-input"),k=u("el-tooltip"),ne=u("el-empty"),z=u("el-table-column"),M=u("el-table"),oe=u("el-pagination"),ae=u("el-config-provider"),re=u("el-dialog");return r(),f("div",{ref_key:"fullscreenElement",ref:I,class:q([s(y)?"p-8":"","p-4 bg-white"])},[o("div",ie,[m.edit?(r(),f("div",ue,[t(g,{type:"primary"},{default:l(()=>[...e[6]||(e[6]=[o("i",{class:"ri-add-line"},null,-1),d("新增",-1)])]),_:1}),t(g,{text:""},{default:l(()=>[...e[7]||(e[7]=[o("i",{class:"ri-download-2-line"},null,-1),d("匯入 ",-1)])]),_:1}),t(h,{trigger:"click"},{dropdown:l(()=>[t(C,null,{default:l(()=>[t(c,{disabled:""},{default:l(()=>[...e[9]||(e[9]=[d("篩選後的資料",-1)])]),_:1}),t(c,null,{default:l(()=>[...e[10]||(e[10]=[d("全部資料",-1)])]),_:1})]),_:1})]),default:l(()=>[t(g,{text:""},{default:l(()=>[...e[8]||(e[8]=[o("i",{class:"ri-upload-2-line mr-1"},null,-1),d("匯出 ",-1)])]),_:1})]),_:1}),t(h,{trigger:"click"},{dropdown:l(()=>[t(C,null,{default:l(()=>[t(c,{disabled:""},{default:l(()=>[...e[12]||(e[12]=[d("篩選後的資料",-1)])]),_:1}),t(c,null,{default:l(()=>[...e[13]||(e[13]=[d("全部資料",-1)])]),_:1})]),_:1})]),default:l(()=>[t(g,{text:""},{default:l(()=>[...e[11]||(e[11]=[o("i",{class:"ri-delete-bin-line mr-1"},null,-1),d("刪除 ",-1)])]),_:1})]),_:1}),t(h,{trigger:"click"},{dropdown:l(()=>[t(C,null,{default:l(()=>[t(c,null,{default:l(()=>[...e[15]||(e[15]=[d("批次修改記錄",-1)])]),_:1}),t(c,{disabled:""},{default:l(()=>[...e[16]||(e[16]=[d("批次列印範本記錄",-1)])]),_:1})]),_:1})]),default:l(()=>[t(g,{text:""},{default:l(()=>[...e[14]||(e[14]=[o("i",{class:"ri-time-line mr-1"},null,-1),d("操作記錄 ",-1)])]),_:1})]),_:1})])):j("",!0),m.record?(r(),f("div",pe,[t(h,{trigger:"click"},{dropdown:l(()=>[t(C,null,{default:l(()=>[t(c,null,{default:l(()=>[...e[18]||(e[18]=[d("批次列印範本記錄",-1)])]),_:1})]),_:1})]),default:l(()=>[t(g,{text:""},{default:l(()=>[...e[17]||(e[17]=[o("i",{class:"ri-time-line mr-1"},null,-1),d("操作記錄 ",-1)])]),_:1})]),_:1})])):j("",!0),o("div",{class:q([m.edit?"":"ml-auto","ricon flex items-center"])},[t(te,{placeholder:"輸入關鍵字",class:"mr-5"},{prefix:l(()=>[...e[19]||(e[19]=[o("i",{class:"ri-search-line"},null,-1)])]),suffix:l(()=>[t(h,{trigger:"click"},{dropdown:l(()=>[t(C,{class:"w-48 max-h-72 overflow-y-auto"},{default:l(()=>[t(W,{modelValue:s(A),"onUpdate:modelValue":e[0]||(e[0]=n=>v(A)?A.value=n:null),indeterminate:s(D),onChange:Z,class:"allCheckbox pl-3"},{default:l(()=>[...e[20]||(e[20]=[d(" 全選 ",-1)])]),_:1},8,["modelValue","indeterminate"]),t(le,{modelValue:s(B),"onUpdate:modelValue":e[1]||(e[1]=n=>v(B)?B.value=n:null),onChange:ee,class:"flex flex-col space-y-1 pl-3 border-t"},{default:l(()=>[(r(!0),f(_,null,V(m.columns,n=>(r(),S(W,{key:n.prop,value:n.prop},{default:l(()=>[d(x(n.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),default:l(()=>[e[21]||(e[21]=o("i",{class:"ri-arrow-down-s-line"},null,-1))]),_:1})]),_:1}),t(k,{content:"篩選條件",placement:"bottom","hide-after":10},{default:l(()=>[t(g,{text:""},{default:l(()=>[...e[22]||(e[22]=[o("i",{class:"ri-filter-line"},null,-1)])]),_:1})]),_:1}),t(k,{content:"顯示欄位",placement:"bottom","hide-after":10},{default:l(()=>[t(g,{text:""},{default:l(()=>[...e[23]||(e[23]=[o("i",{class:"ri-layout-grid-line"},null,-1)])]),_:1})]),_:1}),t(k,{content:"排序",placement:"bottom","hide-after":10},{default:l(()=>[t(g,{text:""},{default:l(()=>[...e[24]||(e[24]=[o("i",{class:"ri-sort-asc"},null,-1)])]),_:1})]),_:1}),t(k,{content:"分組",placement:"bottom","hide-after":10},{default:l(()=>[t(g,{text:""},{default:l(()=>[...e[25]||(e[25]=[o("i",{class:"ri-list-indefinite"},null,-1)])]),_:1})]),_:1}),t(k,{content:"更新",placement:"bottom","hide-after":10},{default:l(()=>[t(g,{text:""},{default:l(()=>[...e[26]||(e[26]=[o("i",{class:"ri-refresh-line cursor-pointer"},null,-1)])]),_:1})]),_:1}),t(k,{content:s(y)?"縮小":"放大",placement:"bottom","hide-after":10},{default:l(()=>[t(g,{text:""},{default:l(()=>[o("i",{class:q([s(y)?"ri-fullscreen-exit-line":"ri-fullscreen-line","cursor-pointer"]),onClick:J},null,2)]),_:1})]),_:1},8,["content"])],2)]),t(M,{data:m.tableData,style:{width:"100%"},border:m.border,"header-cell-style":m.headerCellStyle,class:"my-2",onRowClick:Y},{empty:l(()=>[t(ne,{description:"暫無資料"})]),default:l(()=>[t(z,{type:"selection",width:"55",align:"center",fixed:""}),(r(!0),f(_,null,V(m.columns,n=>(r(),f(_,{key:n.prop||n.label},[n.children?(r(),S(z,{key:1,label:n.label,"header-align":n.headerAlign||"center"},{default:l(()=>[(r(!0),f(_,null,V(n.children,a=>(r(),S(z,{key:a.prop||a.label,prop:a.prop,label:a.label,sortable:a.sortable,"min-width":a.minWidth||null,"header-align":a.headerAlign||"center",align:a.align||"left"},P({_:2},[i.$slots[a.prop]?{name:"default",fn:l(T=>[R(i.$slots,a.prop,$({ref_for:!0},T),void 0,!0)]),key:"0"}:void 0]),1032,["prop","label","sortable","min-width","header-align","align"]))),128))]),_:2},1032,["label","header-align"])):(r(),S(z,{key:0,prop:n.prop,label:n.label,sortable:n.sortable||!1,"min-width":n.minWidth,fixed:n.fixed,align:n.align,"header-align":n.headerAlign},P({_:2},[n.prop==="pdImage"?{name:"default",fn:l(a=>[o("img",{src:a.row[n.prop],alt:"產品圖片",style:{width:"50px",height:"auto"}},null,8,fe)]),key:"0"}:n.slot?{name:"default",fn:l(a=>[R(i.$slots,n.slot,$({ref_for:!0},a),void 0,!0)]),key:"1"}:void 0]),1032,["prop","label","sortable","min-width","fixed","align","header-align"]))],64))),128))]),_:3},8,["data","border","header-cell-style"]),t(ae,{locale:s(de)},{default:l(()=>[t(oe,{"current-page":s(F),"onUpdate:currentPage":e[2]||(e[2]=n=>v(F)?F.value=n:null),"page-size":s(U),"onUpdate:pageSize":e[3]||(e[3]=n=>v(U)?U.value=n:null),"page-sizes":[10,20,50,100],size:s(L),disabled:s(K),background:s(H),layout:"total, sizes, prev, pager, next, jumper",total:30,onSizeChange:O,onCurrentChange:G},null,8,["current-page","page-size","size","disabled","background"])]),_:1},8,["locale"]),t(re,{modelValue:s(b),"onUpdate:modelValue":e[4]||(e[4]=n=>v(b)?b.value=n:null),visible:s(b),"onUpdate:visible":e[5]||(e[5]=n=>v(b)?b.value=n:null),width:"40%",center:"",onClose:X},{header:l(()=>[o("div",ge,[o("span",me,x(s(N)),1),e[27]||(e[27]=o("hr",{class:"w-full border-t border-gray-300"},null,-1))])]),default:l(()=>[o("div",be,[s(w)?(r(),f("div",ce,[o("div",_e,[(r(!0),f(_,null,V(m.columns,n=>(r(),f(_,{key:n.label},[n.children?(r(),f("div",ke,[o("p",null,[o("strong",null,x(n.label)+"：",1)]),t(M,{data:[s(w)],"header-cell-style":m.headerCellStyle,border:"",style:{width:"100%"}},{default:l(()=>[(r(!0),f(_,null,V(n.children,a=>(r(),S(z,{key:a.prop,label:a.label,prop:a.prop,"min-width":a.minWidth},{default:l(T=>[o("span",null,x(T.row[a.prop]||"-"),1)]),_:2},1032,["label","prop","min-width"]))),128))]),_:2},1032,["data","header-cell-style"])])):(r(),f("p",ye,[o("strong",null,x(n.label)+"：",1),d(x(s(w)[n.prop]||"-"),1)]))],64))),128))])])):j("",!0)])]),_:1},8,["modelValue","visible"])],2)}}},we=se(ve,[["__scopeId","data-v-773adcd1"]]);export{we as M};
