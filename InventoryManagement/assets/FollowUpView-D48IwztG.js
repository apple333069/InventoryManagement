import{r as d,j as u,b as w,d as r,e as a,k as e,w as t,m as p,l as _,u as l,n as A,F as K,q as Q,h as $,y as We,L as we,i as ce,p as Ae,M as ge,v as M,N as Re,O as Ee,_ as Ce,H as Fe,I as ze,J as ye,z as xe,E as ke,K as Ve}from"./index-DuMLqF1m.js";const je={class:"flex justify-between pb-2"},Me={class:"flex items-center"},Se={class:"ricon flex items-center"},Be={__name:"ClientSelector",props:{tableData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},emits:["choose"],setup(R,{emit:x}){const S=x,f=d(""),m=d(),B=V=>{const C=V.clientName;S("choose",C)},H=d(null),g=d(!1),k=()=>{var V;document.fullscreenElement?(document.exitFullscreen(),g.value=!1):((V=H.value)==null||V.requestFullscreen(),g.value=!0)};return document.addEventListener("fullscreenchange",()=>{g.value=!!document.fullscreenElement}),(V,C)=>{const E=u("el-button"),I=u("el-input"),W=u("el-tooltip"),D=u("el-table-column"),F=u("el-table");return r(),w("div",{ref_key:"fullscreenElement",ref:H,class:A([l(g)?"p-8":"","p-4 bg-white"])},[a("div",je,[a("div",Me,[e(E,{type:"primary"},{default:t(()=>[...C[1]||(C[1]=[a("i",{class:"ri-add-line"},null,-1),p("新增",-1)])]),_:1})]),a("div",Se,[e(I,{placeholder:"搜尋資料",class:"mr-5",modelValue:l(f),"onUpdate:modelValue":C[0]||(C[0]=T=>_(f)?f.value=T:null),clearable:""},{prefix:t(()=>[...C[2]||(C[2]=[a("i",{class:"ri-search-line"},null,-1)])]),_:1},8,["modelValue"]),e(W,{content:"篩選條件",placement:"bottom","hide-after":10},{default:t(()=>[e(E,{text:""},{default:t(()=>[...C[3]||(C[3]=[a("i",{class:"ri-filter-line"},null,-1)])]),_:1})]),_:1}),e(W,{content:l(g)?"縮小":"放大",placement:"bottom","hide-after":10},{default:t(()=>[e(E,{text:""},{default:t(()=>[a("i",{class:A([l(g)?"ri-fullscreen-exit-line":"ri-fullscreen-line","cursor-pointer"]),onClick:k},null,2)]),_:1})]),_:1},8,["content"])])]),e(F,{ref_key:"singleTableRef",ref:m,"highlight-current-row":"",columns:R.columns,data:R.tableData,border:!0,"row-class-name":"warning-row",style:{width:"100%"},class:"my-2",onRowClick:B},{default:t(()=>[e(D,{type:"index",width:"55"}),(r(!0),w(K,null,Q(R.columns,T=>(r(),$(D,{key:T.prop,prop:T.prop,label:T.label,sortable:T.sortable,width:T.minWidth},null,8,["prop","label","sortable","width"]))),128))]),_:1},8,["columns","data"])],2)}}},Ie={key:0},qe={class:"w-full"},Pe={class:"grid grid-cols-1 xl:grid-cols-4 gap-4"},Le={class:"col-span-2"},Oe={class:"col-span-2 pl-1"},Ke={key:1},He={class:"w-full"},Je={class:"grid grid-cols-1 xl:grid-cols-4 gap-4"},Ge={class:"col-span-2"},Qe={class:"w-full bg-gray-50 rounded-sm border"},Xe={class:"col-span-2 pl-1"},Ye={class:"w-full border-dashed border-2 my-2 p-1.5 min-h-12"},Ze={class:"grid grid-cols-4"},el={class:"col-span-2 h-72 min-h-72 overflow-y-auto border-r-2"},ll={class:"col-span-2 pl-4"},tl={class:"flex flex-col justify-start"},ol={key:1,class:"flex items-center justify-center h-72"},al={class:"dialog-footer pt-3.5 flex justify-end"},be={__name:"FollowUpForm",props:{edit:{type:Boolean,required:!0},isDialog:{type:Boolean,default:!1},data:{type:Object,default:()=>({})},columns:{type:Array,default:()=>[]},tableData:{type:Array,default:()=>[]}},setup(R){const x=R,{edit:S,isDialog:f,data:m,columns:B,tableData:H}=x,g=d(""),k=d(""),V=d(!1),C=y=>{k.value=y,V.value=!1},E=d(""),I=d(""),W=d([{value:"1",label:"上門拜訪"},{value:"2",label:"電話拜訪"},{value:"3",label:"微信溝通"},{value:"4",label:"其他"}]),D=d(""),F=d(!1),T=d(""),z=d("1"),ne=d("軟件有限公司"),X=d(null),P=d(""),Y=d([{department:"生產部",members:[{value:"王小明",name:"王小明"},{value:"張璿",name:"張璿"}]},{department:"銷售一部",members:[{value:"張三",name:"張三"},{value:"李四",name:"李四"},{value:"Adam",name:"Adam"}]}]),Z=We(()=>{if(P.value===ne.value||!P.value)return Y.value.flatMap(y=>y.members);{const y=Y.value.find(n=>n.department===P.value);return y?y.members:[]}}),te=d(""),ue=d(""),re=d([{id:1,label:"軟件有限公司",children:[{id:"1-1",label:"生產部"},{id:"1-2",label:"銷售部",children:[{id:"1-2-1",label:"銷售一部"},{id:"1-2-2",label:"銷售二部"}]},{id:4,label:"研發部"},{id:5,label:"市場部"},{id:6,label:"採購部"},{id:7,label:"財務部"},{id:8,label:"會計出納"},{id:9,label:"測試部"},{id:10,label:"行政部"}]}]),pe=(y,n)=>{P.value=y.label},ee=(y,n)=>y?n.label.includes(y):!0,J=d(""),L=d(""),oe=d(""),me=d([{value:"1",label:"初次溝通"},{value:"2",label:"需求溝通"},{value:"3",label:"方案確認"},{value:"4",label:"報價"},{value:"5",label:"合約簽署"},{value:"6",label:"銷售回訪"}]),j=d("");return we(T,function(y){X.value.filter(y)}),we(te,function(y){ue.value.filter(y)}),(y,n)=>{const h=u("el-input"),v=u("el-form-item"),q=u("el-button"),c=u("el-option"),o=u("el-select"),b=u("el-tag"),O=u("el-date-picker"),le=u("el-form"),G=u("el-dialog"),se=u("el-radio"),fe=u("el-radio-group"),ae=u("el-tab-pane"),U=u("el-tabs");return r(),w("div",null,[n[37]||(n[37]=a("h2",{class:"text-lg font-bold text-primary border-b-4 border-blue-100"},"客戶跟進紀錄",-1)),e(le,{"label-position":"top",class:"p-6 font-bold"},{default:t(()=>[l(S)?(r(),w("div",Ie,[a("div",qe,[e(v,{label:"跟進內容記錄",required:!0},{default:t(()=>[e(h,{class:A({"w-full":l(f),"xl:max-w-2xl":!l(f)}),rows:5,type:"textarea",modelValue:l(g),"onUpdate:modelValue":n[0]||(n[0]=s=>_(g)?g.value=s:null)},null,8,["class","modelValue"])]),_:1})]),a("div",Pe,[a("div",Le,[e(v,{label:"選擇客戶",required:!0},{default:t(()=>[l(k)==""?(r(),$(q,{key:0,plain:"",onClick:n[1]||(n[1]=s=>V.value=!0),class:A(["border-dashed w-full",{"w-full":l(f),"xl:w-1/2":!l(f)}])},{default:t(()=>[...n[29]||(n[29]=[a("span",null,[a("i",{class:"ri-database-2-line px-1"}),p("選擇資料")],-1)])]),_:1},8,["class"])):(r(),w("div",{key:1,onClick:n[3]||(n[3]=s=>V.value=!0),class:A(["border-dashed border border-gray-200 text-left cursor-pointer",{"w-full":l(f),"xl:w-1/2":!l(f)}])},[l(k)?(r(),$(q,{key:0,type:"primary",text:"",bg:"",icon:l(ge),onClick:n[2]||(n[2]=Ae(s=>k.value="",["stop"]))},{default:t(()=>[p(M(l(k)),1)]),_:1},8,["icon"])):ce("",!0)],2))]),_:1}),e(v,{label:"客戶編碼",class:"w-full"},{default:t(()=>[e(h,{modelValue:l(E),"onUpdate:modelValue":n[4]||(n[4]=s=>_(E)?E.value=s:null),value:"暫無內容",disabled:""},null,8,["modelValue"])]),_:1}),e(v,{label:"跟進方式",class:A({"w-full":l(f),"xl:w-1/2":!l(f)}),required:!0},{default:t(()=>[e(o,{modelValue:l(I),"onUpdate:modelValue":n[5]||(n[5]=s=>_(I)?I.value=s:null),placeholder:"請選擇",class:"w-full",filterable:"",remote:"","reserve-keyword":"","remote-show-suffix":""},{default:t(()=>[(r(!0),w(K,null,Q(l(W),s=>(r(),$(c,{label:s.label,value:s.value},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1},8,["class"]),e(v,{label:"跟進人"},{default:t(()=>[l(D)==""?(r(),$(q,{key:0,plain:"",onClick:n[6]||(n[6]=s=>F.value=!0),class:A(["border-dashed",{"w-full":l(f),"xl:w-1/2":!l(f)}])},{default:t(()=>[...n[30]||(n[30]=[a("span",null,[a("i",{class:"ri-add-line px-1"}),p("選擇成員")],-1)])]),_:1},8,["class"])):(r(),w("div",{key:1,onClick:n[7]||(n[7]=s=>F.value=!0),class:A(["border-dashed border border-gray-200 text-left cursor-pointer",{"w-full":l(f),"xl:w-1/2":!l(f)}])},[e(b,{size:"large",type:"primary",class:"inline-block"},{default:t(()=>[p(M(l(D)),1)]),_:1})],2))]),_:1})]),a("div",Oe,[e(v,{label:"客戶名稱",class:"w-full"},{default:t(()=>[e(h,{modelValue:l(J),"onUpdate:modelValue":n[8]||(n[8]=s=>_(J)?J.value=s:null),value:"暫無內容",disabled:""},null,8,["modelValue"])]),_:1}),e(v,{label:"跟進時間",class:"w-full",required:!0},{default:t(()=>[e(O,{modelValue:l(L),"onUpdate:modelValue":n[9]||(n[9]=s=>_(L)?L.value=s:null),type:"datetime",placeholder:"選擇日期和時間",style:{width:"374px"}},null,8,["modelValue"])]),_:1}),e(v,{label:"跟進內容",class:A({"w-full":l(f),"xl:w-1/2":!l(f)}),required:!0},{default:t(()=>[e(o,{modelValue:l(oe),"onUpdate:modelValue":n[10]||(n[10]=s=>_(oe)?oe.value=s:null),placeholder:"請選擇",class:"w-full",filterable:"",remote:"","reserve-keyword":"","remote-show-suffix":""},{default:t(()=>[(r(!0),w(K,null,Q(l(me),s=>(r(),$(c,{label:s.label,value:s.value},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1},8,["class"]),e(v,{label:"銷售歸屬部門",class:"w-full"},{default:t(()=>[e(h,{modelValue:l(j),"onUpdate:modelValue":n[11]||(n[11]=s=>_(j)?j.value=s:null),value:"暫無內容",disabled:""},null,8,["modelValue"])]),_:1})])])])):(r(),w("div",Ke,[a("div",He,[e(v,{label:"跟進內容記錄"},{default:t(()=>[e(h,{class:"w-full",modelValue:l(m).followupRecord,"onUpdate:modelValue":n[12]||(n[12]=s=>l(m).followupRecord=s),disabled:""},null,8,["modelValue"])]),_:1})]),a("div",Je,[a("div",Ge,[e(v,{label:"選擇客戶",class:"w-full"},{default:t(()=>[e(h,{class:"invisible",modelValue:l(m).clientName,"onUpdate:modelValue":n[13]||(n[13]=s=>l(m).clientName=s),disabled:""},null,8,["modelValue"])]),_:1}),e(v,{label:"客戶編碼",class:"w-full"},{default:t(()=>[e(h,{modelValue:l(m).clientNo,"onUpdate:modelValue":n[14]||(n[14]=s=>l(m).clientNo=s),disabled:""},null,8,["modelValue"])]),_:1}),e(v,{label:"跟進方式",class:"w-full"},{default:t(()=>[e(h,{modelValue:l(m).followupMethod,"onUpdate:modelValue":n[15]||(n[15]=s=>l(m).followupMethod=s),disabled:""},null,8,["modelValue"])]),_:1}),e(v,{label:"跟進人"},{default:t(()=>[a("div",Qe,[e(b,{type:"primary",class:"inline-block ml-1"},{default:t(()=>[p(M(l(m).followupPerson),1)]),_:1})])]),_:1}),e(v,{label:"外勤打卡"},{default:t(()=>[e(h,{modelValue:l(m).fieldWorkCheckIn,"onUpdate:modelValue":n[16]||(n[16]=s=>l(m).fieldWorkCheckIn=s),disabled:""},null,8,["modelValue"])]),_:1})]),a("div",Xe,[e(v,{label:"客戶名稱",class:"w-full"},{default:t(()=>[e(h,{modelValue:l(m).clientName,"onUpdate:modelValue":n[17]||(n[17]=s=>l(m).clientName=s),disabled:""},null,8,["modelValue"])]),_:1}),e(v,{label:"跟進時間",class:"w-full"},{default:t(()=>[e(h,{modelValue:l(m).followupTime,"onUpdate:modelValue":n[18]||(n[18]=s=>l(m).followupTime=s),disabled:""},null,8,["modelValue"])]),_:1}),e(v,{label:"跟進內容",class:"w-full"},{default:t(()=>[e(h,{modelValue:l(m).followupContentType,"onUpdate:modelValue":n[19]||(n[19]=s=>l(m).followupContentType=s),disabled:""},null,8,["modelValue"])]),_:1}),e(v,{label:"銷售歸屬部門",class:"w-full"},{default:t(()=>[e(h,{modelValue:l(m).salesDepartment,"onUpdate:modelValue":n[20]||(n[20]=s=>l(m).salesDepartment=s),disabled:""},null,8,["modelValue"])]),_:1})])])]))]),_:1}),e(G,{modelValue:l(V),"onUpdate:modelValue":n[21]||(n[21]=s=>_(V)?V.value=s:null),width:"800"},{header:t(()=>[...n[31]||(n[31]=[a("div",{class:"flex flex-col items-start"},[a("span",{class:"text-lg font-bold text-gray-500 px-2 pt-2"},"選擇資料")],-1)])]),default:t(()=>[n[32]||(n[32]=a("hr",{class:"w-full border-t border-gray-300"},null,-1)),e(Be,{tableData:l(H),columns:l(B),onChoose:C},null,8,["tableData","columns"])]),_:1},8,["modelValue"]),e(G,{modelValue:l(F),"onUpdate:modelValue":n[28]||(n[28]=s=>_(F)?F.value=s:null),title:"成員列表",width:"800"},{default:t(()=>[a("div",null,[a("div",Ye,[l(D)?(r(),$(q,{key:0,type:"primary",text:"",bg:"",icon:l(ge),onClick:n[22]||(n[22]=s=>D.value="")},{default:t(()=>[p(M(l(D)),1)]),_:1},8,["icon"])):ce("",!0)]),e(U,{modelValue:l(z),"onUpdate:modelValue":n[25]||(n[25]=s=>_(z)?z.value=s:null),class:"demo-tabs border-b-2"},{default:t(()=>[e(ae,{label:"成員",name:"1"},{default:t(()=>[a("div",null,[e(h,{modelValue:l(T),"onUpdate:modelValue":n[23]||(n[23]=s=>_(T)?T.value=s:null),style:{width:"100%"},placeholder:"搜尋部門",class:"my-2",clearable:""},null,8,["modelValue"]),a("div",Ze,[a("div",el,[e(l(Re),{ref_key:"treeRef",ref:X,style:{"max-width":"800px"},class:"filter-tree",data:l(re),"default-expand-all":"","filter-node-method":ee,onNodeClick:pe},{default:t(({node:s})=>[a("span",{style:Ee({color:l(P)===s.label?"#409EFF":"inherit"})},M(s.label),5)]),_:1},8,["data"])]),a("div",ll,[l(Z).length!==0?(r(),$(fe,{key:0,modelValue:l(D),"onUpdate:modelValue":n[24]||(n[24]=s=>_(D)?D.value=s:null)},{default:t(()=>[a("div",tl,[(r(!0),w(K,null,Q(l(Z),s=>(r(),$(se,{key:s.value,value:s.value},{default:t(()=>[p(M(s.name),1)]),_:2},1032,["value"]))),128))])]),_:1},8,["modelValue"])):(r(),w("div",ol,[...n[33]||(n[33]=[a("p",null,"沒有可選成員",-1)])]))])])])]),_:1}),e(ae,{label:"當前使用者",name:"2"},{default:t(()=>[...n[34]||(n[34]=[a("div",{class:"flex items-center justify-center h-72"},[a("p",null,"沒有可選成員")],-1)])]),_:1})]),_:1},8,["modelValue"]),a("div",al,[e(q,{onClick:n[26]||(n[26]=s=>F.value=!1)},{default:t(()=>[...n[35]||(n[35]=[p("取消",-1)])]),_:1}),e(q,{type:"primary",onClick:n[27]||(n[27]=s=>F.value=!1)},{default:t(()=>[...n[36]||(n[36]=[p(" 確定 ",-1)])]),_:1})])])]),_:1},8,["modelValue"])])}}},nl={class:"flex justify-between"},sl=["src"],dl={class:"flex flex-col items-start"},il={class:"text-lg font-bold text-gray-500 px-2 pt-2"},ul={class:"dialog-content"},rl={class:"grid grid-cols-12"},pl={class:"col-span-9 max-h-screen overflow-y-auto"},ml={class:"w-full grid grid-cols-12 border-b-2 py-2"},fl={class:"col-span-10 flex"},cl={class:"col-span-2 justify-end"},bl={class:"px-2"},vl={class:"pt-6"},_l={class:"grid grid-cols-4 gap-3 p-4 ml-2"},wl={class:"col-span-2 flex"},gl={class:"w-2/3"},yl={class:"col-span-2 flex"},xl={class:"w-2/3"},kl={class:"col-span-2 flex"},Vl={class:"w-2/3"},Cl={class:"col-span-3 bg-gray-100 max-h-screen"},hl={class:"w-full max-h-[880px] h-[720px] overflow-y-auto"},Dl={class:"bg-white w-full p-2.5 rounded-md mb-2"},$l={class:"grid grid-cols-6 py-1"},Tl={class:"w-full relative"},Ul={class:"w-full absolute bottom-0"},Nl={key:0},Wl={class:"grid grid-cols-6 items-center"},Al={class:"col-span-1"},Rl={class:"col-span-1"},El={class:"col-span-4 text-right pt-1"},Fl={class:"dialog-content px-2"},zl={class:"py-6"},jl={class:"flex flex-start pl-8 pt-4 dialog-footer box-border border-dashed border-t-2 bg-white rounded-b-md"},Ml={__name:"FollowUpTableDialog",props:{isButtonArea:{type:Boolean,default:!0},tableData:{type:Array,required:!0},columns:{type:Array,required:!0},border:{type:Boolean,default:!0},headerCellStyle:{type:Object,default:()=>({backgroundColor:"#f5f7f8",color:"#606266",fontWeight:"bold"})},pickClientColumns:{type:Array,default:()=>[]},pickClientData:{type:Array,default:()=>[]}},setup(R){const x=R,{edit:S,columns:f,tableData:m,pickClientColumns:B,pickClientData:H}=x,g=d(3),k=d(10),V=d("default"),C=d(!1),E=d(!1),I=d(null),W=d(!1),D=()=>{console.log("items per page")},F=()=>{console.log("current page: ")},T=()=>{var c;document.fullscreenElement?(document.exitFullscreen(),W.value=!1):((c=I.value)==null||c.requestFullscreen(),W.value=!0)};document.addEventListener("fullscreenchange",()=>{W.value=!!document.fullscreenElement});const z=d(!1),ne=d(""),X=d(null),P=d(0),Y=d(""),Z=d(""),te=d(""),ue=c=>{ne.value=c.clientName,X.value=c,P.value++,z.value=!0,Y.value=c.submitter,Z.value=c.submitTime,te.value=c.updateTime},re=()=>{X.value=null,Y.value="",Z.value="",te.value=""},pe=c=>{ue(c)},ee=d(!1),J=d(!1),L=d([]),oe=c=>{L.value=c?x.columns.map(o=>o.prop):[],J.value=!1},me=c=>{const o=c.length;ee.value=o===x.columns.length,J.value=o>0&&o<x.columns.length},j=d(!1),y=()=>{},n=d("1"),h=(c,o)=>{console.log(c,o)},v=d(""),q=d(!1);return(c,o)=>{const b=u("el-button"),O=u("el-dropdown-item"),le=u("el-dropdown-menu"),G=u("el-dropdown"),se=u("el-checkbox"),fe=u("el-checkbox-group"),ae=u("el-input"),U=u("el-tooltip"),s=u("el-empty"),de=u("el-table-column"),he=u("el-table"),ve=u("el-pagination"),De=u("el-divider"),$e=u("el-tag"),_e=u("el-tab-pane"),Te=u("el-upload"),Ue=u("el-tabs");return r(),w("div",{ref_key:"fullscreenElement",ref:I,class:A([l(W)?"p-8":"","p-4 bg-white"])},[a("div",nl,[a("div",{class:A(["flex items-center",{invisible:!R.isButtonArea}])},[e(b,{type:"primary",onClick:o[0]||(o[0]=i=>j.value=!0)},{default:t(()=>[...o[14]||(o[14]=[a("i",{class:"ri-add-line"},null,-1),p("新增",-1)])]),_:1}),e(b,{text:""},{default:t(()=>[...o[15]||(o[15]=[a("i",{class:"ri-download-2-line"},null,-1),p("匯入 ",-1)])]),_:1}),e(G,{trigger:"click"},{dropdown:t(()=>[e(le,null,{default:t(()=>[e(O,{disabled:""},{default:t(()=>[...o[17]||(o[17]=[p("篩選後的資料",-1)])]),_:1}),e(O,null,{default:t(()=>[...o[18]||(o[18]=[p("全部資料",-1)])]),_:1})]),_:1})]),default:t(()=>[e(b,{text:""},{default:t(()=>[...o[16]||(o[16]=[a("i",{class:"ri-upload-2-line mr-1"},null,-1),p("匯出 ",-1),a("i",{class:"ri-arrow-down-s-fill"},null,-1)])]),_:1})]),_:1}),e(G,{trigger:"click"},{dropdown:t(()=>[e(le,null,{default:t(()=>[e(O,{disabled:""},{default:t(()=>[...o[20]||(o[20]=[p("篩選後的資料",-1)])]),_:1}),e(O,null,{default:t(()=>[...o[21]||(o[21]=[p("全部資料",-1)])]),_:1})]),_:1})]),default:t(()=>[e(b,{text:""},{default:t(()=>[...o[19]||(o[19]=[a("i",{class:"ri-delete-bin-line mr-1"},null,-1),p("刪除 ",-1),a("i",{class:"ri-arrow-down-s-fill"},null,-1)])]),_:1})]),_:1}),e(G,{trigger:"click"},{dropdown:t(()=>[e(le,null,{default:t(()=>[e(O,null,{default:t(()=>[...o[23]||(o[23]=[p("批次修改記錄",-1)])]),_:1}),e(O,{disabled:""},{default:t(()=>[...o[24]||(o[24]=[p("批次列印範本記錄",-1)])]),_:1})]),_:1})]),default:t(()=>[e(b,{text:""},{default:t(()=>[...o[22]||(o[22]=[a("i",{class:"ri-time-line mr-1"},null,-1),p("操作記錄 ",-1),a("i",{class:"ri-arrow-down-s-fill"},null,-1)])]),_:1})]),_:1})],2),a("div",{class:A([l(S)?"":"ml-auto","ricon flex items-center"])},[e(ae,{placeholder:"輸入關鍵字",class:"mr-5"},{prefix:t(()=>[...o[25]||(o[25]=[a("i",{class:"ri-search-line"},null,-1)])]),suffix:t(()=>[e(G,{trigger:"click"},{dropdown:t(()=>[e(le,{class:"w-48 max-h-72 overflow-y-auto"},{default:t(()=>[e(se,{modelValue:l(ee),"onUpdate:modelValue":o[1]||(o[1]=i=>_(ee)?ee.value=i:null),indeterminate:l(J),onChange:oe,class:"allCheckbox pl-3"},{default:t(()=>[...o[26]||(o[26]=[p(" 全選 ",-1)])]),_:1},8,["modelValue","indeterminate"]),e(fe,{modelValue:l(L),"onUpdate:modelValue":o[2]||(o[2]=i=>_(L)?L.value=i:null),onChange:me,class:"flex flex-col space-y-1 pl-3 border-t"},{default:t(()=>[(r(!0),w(K,null,Q(l(f),i=>(r(),$(se,{key:i.prop,value:i.prop},{default:t(()=>[p(M(i.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),default:t(()=>[o[27]||(o[27]=a("i",{class:"ri-arrow-down-s-line"},null,-1))]),_:1})]),_:1}),e(U,{content:"篩選條件",placement:"bottom","hide-after":10},{default:t(()=>[e(b,{text:""},{default:t(()=>[...o[28]||(o[28]=[a("i",{class:"ri-filter-line"},null,-1)])]),_:1})]),_:1}),e(U,{content:"顯示欄位",placement:"bottom","hide-after":10},{default:t(()=>[e(b,{text:""},{default:t(()=>[...o[29]||(o[29]=[a("i",{class:"ri-layout-grid-line"},null,-1)])]),_:1})]),_:1}),e(U,{content:"排序",placement:"bottom","hide-after":10},{default:t(()=>[e(b,{text:""},{default:t(()=>[...o[30]||(o[30]=[a("i",{class:"ri-sort-asc"},null,-1)])]),_:1})]),_:1}),e(U,{content:"分組",placement:"bottom","hide-after":10},{default:t(()=>[e(b,{text:""},{default:t(()=>[...o[31]||(o[31]=[a("i",{class:"ri-list-indefinite"},null,-1)])]),_:1})]),_:1}),e(U,{content:"更新",placement:"bottom","hide-after":10},{default:t(()=>[e(b,{text:""},{default:t(()=>[...o[32]||(o[32]=[a("i",{class:"ri-refresh-line cursor-pointer"},null,-1)])]),_:1})]),_:1}),e(U,{content:l(W)?"縮小":"放大",placement:"bottom","hide-after":10},{default:t(()=>[e(b,{text:""},{default:t(()=>[a("i",{class:A([l(W)?"ri-fullscreen-exit-line":"ri-fullscreen-line","cursor-pointer"]),onClick:T},null,2)]),_:1})]),_:1},8,["content"])],2)]),e(he,{data:l(m),style:{width:"100%"},border:R.border,"header-cell-style":R.headerCellStyle,class:"my-2",onRowClick:pe},{empty:t(()=>[e(s,{description:"暫無資料"})]),default:t(()=>[e(de,{type:"selection",width:"55",align:"center",fixed:""}),(r(!0),w(K,null,Q(l(f),i=>(r(),w(K,{key:i.prop||i.label},[i.children?(r(),$(de,{key:1,label:i.label,"header-align":i.headerAlign||"center"},{default:t(()=>[(r(!0),w(K,null,Q(i.children,N=>(r(),$(de,{key:N.prop||N.label,prop:N.prop,label:N.label,sortable:N.sortable,"min-width":N.minWidth||null,"header-align":N.headerAlign||"center",align:N.align||"left"},xe({_:2},[c.$slots[N.prop]?{name:"default",fn:t(Ne=>[ke(c.$slots,N.prop,Ve({ref_for:!0},Ne),void 0,!0)]),key:"0"}:void 0]),1032,["prop","label","sortable","min-width","header-align","align"]))),128))]),_:2},1032,["label","header-align"])):(r(),$(de,{key:0,prop:i.prop,label:i.label,sortable:i.sortable||!1,"min-width":i.minWidth,fixed:i.fixed,align:i.align,"header-align":i.headerAlign},xe({_:2},[i.prop==="pdImage"?{name:"default",fn:t(N=>[a("img",{src:N.row[i.prop],alt:"產品圖片",style:{width:"50px",height:"auto"}},null,8,sl)]),key:"0"}:i.slot?{name:"default",fn:t(N=>[ke(c.$slots,i.slot,Ve({ref_for:!0},N),void 0,!0)]),key:"1"}:void 0]),1032,["prop","label","sortable","min-width","fixed","align","header-align"]))],64))),128))]),_:3},8,["data","border","header-cell-style"]),e(l(ze),{locale:l(Fe)},{default:t(()=>[e(ve,{"current-page":l(g),"onUpdate:currentPage":o[3]||(o[3]=i=>_(g)?g.value=i:null),"page-size":l(k),"onUpdate:pageSize":o[4]||(o[4]=i=>_(k)?k.value=i:null),"page-sizes":[10,20,50,100],size:l(V),disabled:l(E),background:l(C),layout:"total, sizes, prev, pager, next, jumper",total:l(m).length,onSizeChange:D,onCurrentChange:F},null,8,["current-page","page-size","size","disabled","background","total"])]),_:1},8,["locale"]),e(l(ye),{modelValue:l(z),"onUpdate:modelValue":o[10]||(o[10]=i=>_(z)?z.value=i:null),visible:l(z),"onUpdate:visible":o[11]||(o[11]=i=>_(z)?z.value=i:null),width:"60%",center:"",onClose:re},{header:t(()=>[a("div",dl,[a("span",il,M(l(ne)),1)])]),default:t(()=>[o[51]||(o[51]=a("hr",{class:"w-full border-t border-gray-300"},null,-1)),a("div",ul,[a("div",rl,[a("div",pl,[a("div",ml,[a("div",fl,[e(U,{content:"顯示欄位",placement:"bottom","hide-after":10},{default:t(()=>[e(b,{text:""},{default:t(()=>[...o[33]||(o[33]=[a("i",{class:"ri-layout-grid-line"},null,-1)])]),_:1})]),_:1}),e(U,{content:"分享",placement:"bottom","hide-after":10},{default:t(()=>[e(b,{text:""},{default:t(()=>[...o[34]||(o[34]=[a("i",{class:"ri-share-line"},null,-1)])]),_:1})]),_:1}),e(U,{content:"列印",placement:"bottom","hide-after":10},{default:t(()=>[e(b,{text:""},{default:t(()=>[...o[35]||(o[35]=[a("i",{class:"ri-printer-line px-1"},null,-1),p("列印 ",-1)])]),_:1})]),_:1}),e(U,{content:"複製",placement:"bottom","hide-after":10},{default:t(()=>[e(b,{text:""},{default:t(()=>[...o[36]||(o[36]=[a("i",{class:"ri-file-copy-line px-1"},null,-1),p("複製 ",-1)])]),_:1})]),_:1}),e(U,{content:"編輯",placement:"bottom","hide-after":10},{default:t(()=>[e(b,{text:""},{default:t(()=>[...o[37]||(o[37]=[a("i",{class:"ri-edit-line px-1"},null,-1),p(" 編輯 ",-1)])]),_:1})]),_:1}),e(U,{content:"刪除",placement:"bottom","hide-after":10},{default:t(()=>[e(b,{text:""},{default:t(()=>[...o[38]||(o[38]=[a("i",{class:"ri-delete-bin-line px-1"},null,-1),p("刪除 ",-1)])]),_:1})]),_:1})]),a("div",cl,[e(ve,{layout:"prev, pager, next",total:1})])]),a("div",bl,[a("div",vl,[(r(),$(be,{edit:!1,data:l(X),key:l(P)},null,8,["data"])),e(De,{class:"py-0 my-0"}),a("div",_l,[a("div",wl,[o[39]||(o[39]=a("p",{class:"w-1/3"},"送出人",-1)),a("p",gl,M(l(Y)),1)]),a("div",yl,[o[40]||(o[40]=a("p",{class:"w-1/3"},"送出時間",-1)),a("p",xl,M(l(Z)),1)]),a("div",kl,[o[41]||(o[41]=a("p",{class:"w-1/3"},"更新時間",-1)),a("p",Vl,M(l(te)),1)])])])])]),a("div",Cl,[e(Ue,{modelValue:l(n),"onUpdate:modelValue":o[9]||(o[9]=i=>_(n)?n.value=i:null),class:"demo-tabs px-4 py-2",onTabClick:h},{default:t(()=>[e(_e,{label:"資料記錄",name:"1"},{default:t(()=>[a("div",hl,[a("div",Dl,[o[44]||(o[44]=a("div",{class:"flex justify-end"},[a("small",{class:"p-1"},"2024-01-08 16:55")],-1)),a("div",$l,[e($e,{size:"large",type:"primary",class:"p-1"},{default:t(()=>[...o[42]||(o[42]=[p("張璿",-1)])]),_:1}),o[43]||(o[43]=a("p",{class:"col-start-6 p-1 text-nowrap"},"建立",-1))]),o[45]||(o[45]=a("p",{class:""},"軟件有限公司",-1))])])]),_:1}),e(_e,{label:"評論",name:"2"},{default:t(()=>[a("div",Tl,[o[50]||(o[50]=a("div",{class:"flex flex-col justify-center items-center max-h-[880px] h-[720px] overflow-y-auto"},[a("i",{class:"ri-box-3-line text-5xl text-blue-400"}),a("p",{class:"p-4 text-gray-400"},"暫無評論")],-1)),a("div",Ul,[l(q)?(r(),w("div",Nl,[e(ae,{modelValue:l(v),"onUpdate:modelValue":o[5]||(o[5]=i=>_(v)?v.value=i:null),style:{width:"100%"},rows:4,type:"textarea",placeholder:"Ctrl + Enter 發送評論"},null,8,["modelValue"]),a("div",Wl,[a("div",Al,[e(b,{link:"",text:"",type:"primary"},{default:t(()=>[...o[46]||(o[46]=[a("i",{class:"ri-at-line"},null,-1)])]),_:1})]),a("div",Rl,[e(Te,{"file-list":c.fileList,"onUpdate:fileList":o[6]||(o[6]=i=>c.fileList=i),class:"upload-demo w-full",action:"#",limit:1,"show-file-list":!1,"auto-upload":!1},{default:t(()=>[e(b,{link:"",text:"",type:"primary"},{default:t(()=>[...o[47]||(o[47]=[a("i",{class:"ri-upload-2-line"},null,-1)])]),_:1})]),_:1},8,["file-list"])]),a("div",El,[e(b,{onClick:o[7]||(o[7]=i=>q.value=!1),disabled:l(v).length==0},{default:t(()=>[...o[48]||(o[48]=[p("發送",-1)])]),_:1},8,["disabled"])])])])):(r(),$(b,{key:1,class:"w-full",onClick:o[8]||(o[8]=i=>q.value=!0)},{default:t(()=>[...o[49]||(o[49]=[p(" 發表評論 ",-1)])]),_:1}))])])]),_:1})]),_:1},8,["modelValue"])])])])]),_:1},8,["modelValue","visible"]),e(l(ye),{modelValue:l(j),"onUpdate:modelValue":o[12]||(o[12]=i=>_(j)?j.value=i:null),visible:l(j),"onUpdate:visible":o[13]||(o[13]=i=>_(j)?j.value=i:null),width:"40%",center:"",onClose:y},{header:t(()=>[...o[52]||(o[52]=[a("div",{class:"flex flex-col items-start"},[a("span",{class:"text-lg font-bold text-gray-500 px-2 pt-2"},"跟進紀錄")],-1)])]),footer:t(()=>[a("div",jl,[e(b,{type:"primary",class:"w-24"},{default:t(()=>[...o[53]||(o[53]=[p("送出",-1)])]),_:1})])]),default:t(()=>[o[54]||(o[54]=a("hr",{class:"w-full border-t border-gray-300"},null,-1)),a("div",Fl,[a("div",zl,[e(be,{edit:!0,isDialog:!0,columns:l(B),tableData:l(H)},null,8,["columns","tableData"])])])]),_:1},8,["modelValue","visible"])],2)}}},ie=Ce(Ml,[["__scopeId","data-v-9d3687b4"]]),Sl={class:"flex flex-col space-y-4"},Bl={key:0},Il={class:"p-8 bg-white rounded-t-md shadow max-h-lvh overflow-y-auto"},ql={class:"pl-10 py-4 box-border border-dashed border-t-2 bg-white rounded-b-md"},Pl={key:1},Ll={class:"p-4 bg-white rounded-md shadow"},Ol={key:2},Kl={class:"p-4 bg-white rounded-md shadow"},Hl={key:3},Jl={class:"p-4 bg-white rounded-md shadow"},Gl={key:4},Ql={class:"p-4 bg-white rounded-md shadow"},Xl={__name:"FollowUpView",setup(R){const x=d("add"),S=d([{followupRecord:"客戶拜訪",clientName:"軟件有限公司",clientNo:"KH240729-01",followupTime:"2024-07-28 16:55:30",followupMethod:"上門拜訪",followupContentType:"初次溝通",followupPerson:"張璿",salesDepartment:"市場部",fieldWorkCheckIn:"",submitter:"張璿",submitTime:"2024-07-29 16:55:30",updateTime:"2024-07-29 16:55:30"},{followupRecord:"需求回訪",clientName:"大發有限公司",clientNo:"KH240729-03",followupTime:"2024-07-30 16:55:30",followupMethod:"電話拜訪",followupContentType:"需求溝通",followupPerson:"王小明",salesDepartment:"市場部",fieldWorkCheckIn:"",submitter:"張璿",submitTime:"2024-07-30 16:55:30",updateTime:"2024-07-30 16:55:30"}]),f=d([{prop:"followupRecord",label:"跟進紀錄內容",minWidth:120},{prop:"clientName",label:"客戶名稱",minWidth:150},{prop:"clientNo",label:"客戶編碼",minWidth:120},{prop:"followupTime",label:"跟進時間",minWidth:120},{prop:"followupMethod",label:"跟進方式",minWidth:120},{prop:"followupContentType",label:"跟進內容",minWidth:120},{prop:"followupPerson",label:"跟進人",minWidth:120},{prop:"salesDepartment",label:"銷售歸屬部門",minWidth:150},{prop:"fieldWorkCheckIn",label:"外勤打卡",minWidth:120},{prop:"submitter",label:"送出人",minWidth:100},{prop:"submitTime",label:"送出時間",minWidth:180},{prop:"updateTime",label:"更新時間",minWidth:180}]),m=d([{prop:"clientName",label:"客戶名稱",sortable:!0,minWidth:140},{prop:"clientTag",label:"客戶標籤",sortable:!0,minWidth:140},{prop:"clientType",label:"客戶分類",sortable:!0},{prop:"priceTier",label:"價格等級",sortable:!0,minWidth:150},{prop:"salesRepresentative",label:"負責人",sortable:!0,minWidth:110}]),B=d([{id:1,clientName:"軟件有限公司",clientTag:"ME",clientType:"潛在客戶",priceTier:"一級售價",salesRepresentative:"張璿"},{id:2,clientName:"大發有限公司",clientTag:"KB",clientType:"潛在客戶",priceTier:"一級售價",salesRepresentative:"張璿"}]);return(H,g)=>{const k=u("el-option"),V=u("el-divider"),C=u("el-select"),E=u("el-col"),I=u("el-row"),W=u("el-button");return r(),w("main",Sl,[e(I,{class:"p-3 bg-white rounded-md shadow flex justify-end md:justify-start"},{default:t(()=>[e(E,{span:5},{default:t(()=>[e(C,{modelValue:l(x),"onUpdate:modelValue":g[0]||(g[0]=D=>_(x)?x.value=D:null),placeholder:"請選擇"},{default:t(()=>[e(k,{label:"僅新增資料",value:"add"}),e(k,{label:"添加並管理個人數據",value:"personal_manage"}),e(k,{label:"添加並管理數據",value:"manage"}),e(k,{label:"查看全部資料",value:"view"}),e(V,{class:"el-divider"}),e(k,{label:"全部有限權的資料",value:"restricted"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(x)==="add"?(r(),w("div",Bl,[a("div",Il,[e(be,{edit:!0,columns:l(m),tableData:l(B)},null,8,["columns","tableData"])]),a("div",ql,[e(W,{type:"primary",class:"w-24"},{default:t(()=>[...g[1]||(g[1]=[p("送出",-1)])]),_:1})])])):l(x)==="personal_manage"?(r(),w("div",Pl,[a("div",Ll,[e(ie,{tableData:l(S),columns:l(f),pickClientColumns:l(m),pickClientData:l(B)},null,8,["tableData","columns","pickClientColumns","pickClientData"])])])):l(x)==="manage"?(r(),w("div",Ol,[a("div",Kl,[e(ie,{tableData:l(S),columns:l(f),pickClientColumns:l(m),pickClientData:l(B)},null,8,["tableData","columns","pickClientColumns","pickClientData"])])])):l(x)==="view"?(r(),w("div",Hl,[a("div",Jl,[e(ie,{tableData:l(S),columns:l(f),isButtonArea:!1},null,8,["tableData","columns"])])])):l(x)==="restricted"?(r(),w("div",Gl,[a("div",Ql,[e(ie,{tableData:l(S),columns:l(f),pickClientColumns:l(m),pickClientData:l(B)},null,8,["tableData","columns","pickClientColumns","pickClientData"])])])):ce("",!0)])}}},Zl=Ce(Xl,[["__scopeId","data-v-ee2f62af"]]);export{Zl as default};
