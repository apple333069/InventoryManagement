import{_ as Je,r as u,o as Xe,a as Ze,A as el,y as ll,L as tl,b as y,d as m,k as l,i as te,w as t,j as i,u as n,e as o,l as b,v as f,m as s,F as L,q as R,h as W,p as al,z as ol}from"./index-DuMLqF1m.js";import{M as S}from"./ManageTable-CLoVzGHA.js";const dl={class:"flex flex-col space-y-4"},nl={key:0},sl={class:"p-8 bg-white rounded-t-md shadow max-h-[82vh] overflow-y-auto"},rl={class:"w-full"},ul={class:"flex space-x-2 justify-center"},il={class:"group-hover:hidden"},pl={class:"group-hover:block hidden"},ml={class:"grid grid-cols-3 gap-2 items-center"},bl={class:"col-span-1 mt-1"},fl={class:"editTable mt-2"},cl={key:0,class:"space-y-2 pt-2 w-full"},gl=["onDragstart","onDrop"],vl=["src"],yl={class:"grow"},hl={class:"font-semibold text-sm"},wl={class:"text-xs text-gray-500"},_l={class:"p-4 bg-white rounded-b-md shadow text-center mt-auto border-t"},xl={key:1,class:"p-2 bg-white rounded-md shadow min-h-[88vh] overflow-auto"},Vl={key:2,class:"p-2 bg-white rounded-md shadow min-h-[88vh] overflow-auto"},kl={key:3,class:"p-2 bg-white rounded-md shadow min-h-[88vh] overflow-auto"},Cl={key:4,class:"p-2 bg-white rounded-md shadow min-h-[88vh] overflow-auto"},Sl={class:"flex justify-between mb-2"},Dl={class:"flex items-center"},Wl={class:"dialog-footer border-t pt-4"},Tl={class:"p-2 min-h-12 mb-2 border border-dashed border-gray-300 flex items-center"},Al={class:"grid grid-cols-2"},Pl={class:"h-72 min-h-72 overflow-y-auto border-r-2"},Ul={class:"pl-4 h-72"},$l={key:0},Ql={class:"flex flex-col"},Ml={key:1,class:"flex h-72 items-center justify-center"},Nl={class:"dialog-footer border-t pt-4"},Il={class:"p-2 min-h-12 mb-2 border border-dashed border-gray-300 flex items-center"},Bl={class:"h-72 min-h-72 overflow-y-auto"},Ll={class:"dialog-footer border-t pt-4"},Rl={__name:"OutboundView",setup(Fl){const k=u("add"),T=u(!1),A=u(!1),P=u(!1),U=u("1"),z=u(!1),F=u(""),Y=u(""),ae=u(""),oe=u(""),de=u(""),we=u(""),x=u([]),ne=u("upload"),G=u(!1),j=u([]),se=u([]),_e=u([]),$=u("member"),D=u(""),re=u(null),J=u([]),E=u(null),O=u(null),X=u(null),ue=u(""),xe=[{value:"a",label:"臺北市",children:[{value:"b",label:"萬華區"},{value:"c",label:"中正區"}]},{value:"d",label:"新北市",children:[{value:"e",label:"板橋區"},{value:"f",label:"中和區"}]}],Ve=d=>{const r=d.clipboardData.getData("text/plain");if(!r)return;if(r.includes('"')){alert("貼上的數據格式錯誤！"),d.preventDefault();return}se.value.push([...j.value]);const N=r.trim().split(`
`).map(I=>{const c=I.split("	"),w={};return be.value.forEach((ie,B)=>{w[ie.prop]=c[B]||""}),w});j.value=[...j.value,...N]},me=d=>{d.ctrlKey&&d.key==="z"&&(se.value.length>0?j.value=se.value.pop():console.log("沒有更多的歷史數據可以復原"))};Xe(()=>{document.addEventListener("keydown",me);const d=new Date;we.value=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`}),Ze(()=>{document.removeEventListener("keydown",me)});const q=el([{pdName:"暫無內容",pdCode:"暫無內容",brand:"暫無內容",model:"暫無內容",unit:"暫無內容",availableStockQty:"暫無內容",outboundQty:"",outboundWarehouse:"",sellingPrice:"",costPrice:"",pdTotalAmount:"暫無內容",totalCost:"暫無內容"}]),ke=()=>{q.push({pdName:"暫無內容",pdCode:"暫無內容",brand:"暫無內容",model:"暫無內容",unit:"暫無內容",availableStockQty:"暫無內容",outboundQty:"",outboundWarehouse:"",sellingPrice:"",costPrice:"",pdTotalAmount:"暫無內容",totalCost:"暫無內容"})},Ce=d=>{ElMessageBox.confirm("確定要刪除這筆資料嗎？","提示",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then(()=>{q.splice(d,1)}).catch(()=>{})},Se=u([{prop:"pdCode",label:"產品編碼",minWidth:150},{prop:"pdName",label:"產品名稱",minWidth:180},{prop:"brand",label:"品牌"},{prop:"model",label:"規格型號",minWidth:150},{prop:"unit",label:"單位",minWidth:100},{prop:"standardPrice",label:"標準銷售價格/元",align:"right",headerAlign:"left"}]),De=u([{pdCode:"A001",pdName:"手機",brand:"華為",model:"P40 Pro",unit:"部",standardPrice:15e3},{pdCode:"B001",pdName:"筆記型電腦",brand:"蘋果",model:"MacBook Pro",unit:"台",standardPrice:4e4},{pdCode:"C001",pdName:"智慧手錶",brand:"Samsung",model:"Galaxy Watch 5",unit:"個",standardPrice:6e3}]),C=u([{prop:"outboundType",label:"出庫類型",minWidth:120},{prop:"outboundWarehouse",label:"出庫倉庫",minWidth:100},{prop:"outboundID",label:"其他出庫單編號",minWidth:150},{prop:"deliveryAddress",label:"收貨地址",minWidth:150},{prop:"pdOutboundDetails",label:"出庫產品明細",headerAlign:"left",children:[{prop:"pdName",label:"產品名稱",minWidth:180},{prop:"pdCode",label:"產品編碼",minWidth:150},{prop:"brand",label:"品牌",minWidth:100},{prop:"model",label:"規格型號",minWidth:100},{prop:"unit",label:"單位",minWidth:100},{prop:"availableStockQty",label:"當前可用庫存數量",minWidth:140,align:"right",headerAlign:"left"},{prop:"inQty",label:"本次出庫數量",minWidth:130,align:"right",headerAlign:"left"},{prop:"storageLocation",label:"出庫倉位",minWidth:100,align:"right",headerAlign:"left"},{prop:"outQtyValid",label:"出庫數量校驗",minWidth:100,align:"right",headerAlign:"left"},{prop:"sellingPrice",label:"銷售單價(含稅)/元",minWidth:150,align:"right",headerAlign:"left"},{prop:"costPrice",label:"成本單價/元",minWidth:130,align:"right",headerAlign:"left"},{prop:"pdTotalAmount",label:"產品售價合計(含稅)/元",minWidth:180,align:"right",headerAlign:"left"},{prop:"totalCost",label:"產品成本合計/元",minWidth:150,align:"right",headerAlign:"left"}]},{prop:"outboundTotalQty",label:"出庫產品總數",minWidth:110,align:"right",headerAlign:"left"},{prop:"outboundTotalPrice",label:"出庫產品售價總額(含稅)/元",minWidth:180,align:"right",headerAlign:"left"},{prop:"outboundTotalCost",label:"出庫產品成本總額/元",minWidth:180,align:"right",headerAlign:"left"},{prop:"outboundConfirm",label:"出庫確認",minWidth:100},{prop:"outboundImg",label:"拍照",minWidth:100},{prop:"outboundTime",label:"出庫時間",minWidth:100},{prop:"warehouseStaff",label:"出庫人員",minWidth:100},{prop:"warehouseDepartment",label:"倉管歸屬部門",minWidth:120},{prop:"submitter",label:"送出人",minWidth:80},{prop:"submitTime",label:"送出時間",minWidth:150},{prop:"updateTime",label:"更新時間",minWidth:150}]),Q=u([{outboundType:"盤虧出庫",outboundWarehouse:"A倉庫",outboundID:"QTRK241031-01",deliveryAddress:"",pdName:"手機",pdCode:"A001",brand:"華為",model:"P40 Pro",unit:"部",availableStockQty:30,outQty:2,storageLocation:"A1",outQtyValid:0,sellingPrice:1400,costPrice:620,pdTotalAmount:0,totalCost:0,outboundTotalQty:28,outboundTotalPrice:36400,outboundTotalCost:18830,outboundConfirm:"確認",outboundImg:"",outboundTime:"220 02:00",warehouseStaff:"阿依",warehouseDepartment:"市場部",submitter:"阿依",submitTime:"2024/01/15 15:30",updateTime:"2024/01/18 20:00"},{outboundType:"調撥出庫",outboundWarehouse:"A倉庫",outboundID:"QTRK241031-01",deliveryAddress:"",pdName:"手機殼",pdCode:"A002",brand:"華為",model:"P40 Pro",unit:"片",availableStockQty:40,outQty:22,storageLocation:"A2",outQtyValid:0,sellingPrice:1300,costPrice:672,pdTotalAmount:364,totalCost:183,outboundTotalQty:20,outboundTotalPrice:28400,outboundTotalCost:14750,outboundConfirm:"確認",outboundImg:"",outboundTime:"2024/03/31 02:00",warehouseStaff:"阿二",warehouseDepartment:"市場部",submitter:"阿二",submitTime:"2024/01/15 15:30",updateTime:"2024/01/18 20:00"}]),be=u([{prop:"outboundQty",label:"本次出庫數量"},{prop:"outboundWarehouse",label:"出庫倉位"},{prop:"sellingPrice",label:"銷售單價(含稅)/元"},{prop:"costPrice",label:"成本單價/元"}]),fe=u([]),We=d=>{fe.value=d},Te=()=>{q.length=0,fe.value.forEach(d=>{const e={pdName:d.pdName||"暫無內容",pdCode:d.pdCode||"暫無內容",brand:d.brand||"暫無內容",model:d.model||"暫無內容",unit:d.unit||"暫無內容",availableStockQty:d.availableStockQty||"暫無內容",outboundQty:d.outboundQty||"",outboundWarehouse:d.outboundWarehouse||"",sellingPrice:d.sellingPrice||"",costPrice:d.costPrice||"",pdTotalAmount:d.pdTotalAmount||"暫無內容",totalCost:d.totalCost||"暫無內容"};q.push(e)}),T.value=!1},Ae=ll(()=>De.value.filter(d=>!Y.value||d.name.toLowerCase().includes(Y.value.toLowerCase()))),Pe=()=>{if(z.value=!z.value,z.value){const d=new Date;F.value=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")} ${String(d.getHours()).padStart(2,"0")}:${String(d.getMinutes()).padStart(2,"0")}`}else F.value=""},Ue=(d,e)=>{console.log(d,e)},$e=(d,e)=>{const r=new FileReader;r.onload=V=>{x.value.push({file:d,url:V.target.result})},r.readAsDataURL(d.raw)},Qe=d=>{const e=d.type.startsWith("image/"),r=d.size/1024/1024<5;return e||this.$message.error("只能上傳圖片"),r||this.$message.error("圖片大小不能超過 5MB"),e&&r},Me=d=>{x.value.splice(d,1)},Ne=d=>{x.value.draggedIndex=d},Ie=d=>{const e=x.value.draggedIndex,r=x.value[e];x.value.splice(e,1),x.value.splice(d,0,r)},Be=d=>d<1024?`${d} B`:d<1024*1024?`${(d/1024).toFixed(2)} KB`:`${(d/(1024*1024)).toFixed(2)} MB`,Le=d=>{const e=d.clipboardData.items;for(let r=0;r<e.length;r++){const V=e[r];if(V.type.startsWith("image")){const N=V.getAsFile(),I=new FileReader;I.onload=c=>{x.value.push({file:N,url:c.target.result})},I.readAsDataURL(N)}}d.preventDefault()},M=d=>{switch(d){case"審批通過":return"success";case"待審批":return"warning";case"已拒絕":return"danger";default:return"info"}},H=d=>{switch(d){case"完成":return"success";case"進行中":return"primary";case"已停止":return"danger";default:return"info"}},Re=d=>{switch(d){case"出庫":return"success";case"計畫出庫":return"warning";case"庫存凍結":return"danger";default:return"info"}},ce=(d,e)=>{};tl(D,function(d){re.value.filter(d)});const ge=(d,e)=>d?e.label.includes(d):!0,Fe=d=>{J.value=je(d.id),E.value=null,O.value=null},Ye=d=>{X.value=d.label},je=d=>({101:[{id:"1",name:"張三"},{id:"2",name:"李四"}],201:[{id:"3",name:"王五"},{id:"4",name:"趙六"}],202:[{id:"5",name:"小明"},{id:"6",name:"小紅"}]})[d]||[],ve=u([{id:1,label:"軟件有限公司",children:[{id:"101",label:"生產部"},{id:"102",label:"銷售部",children:[{id:"201",label:"銷售一部"},{id:"202",label:"銷售二部"}]},{id:"103",label:"研發部"},{id:"104",label:"市場部"},{id:"105",label:"採購部"},{id:"106",label:"財務部"}]}]),Ee=d=>{O.value=J.value.find(e=>e.id===d)};return(d,e)=>{const r=i("el-option"),V=i("el-select"),N=i("el-col"),I=i("el-row"),c=i("el-form-item"),w=i("el-input"),ie=i("el-cascader"),B=i("el-form"),g=i("el-button"),Z=i("el-dropdown-item"),Oe=i("el-dropdown-menu"),qe=i("el-dropdown"),v=i("el-table-column"),pe=i("el-table"),h=i("el-tag"),ye=i("el-radio"),He=i("el-date-picker"),Ke=i("el-upload"),_=i("el-tab-pane"),K=i("el-tabs"),ze=i("el-tooltip"),ee=i("el-dialog"),he=i("el-tree"),Ge=i("el-radio-group");return m(),y("main",dl,[l(I,{class:"p-3 bg-white rounded-md shadow flex justify-end md:justify-start"},{default:t(()=>[l(N,{span:5},{default:t(()=>[l(V,{modelValue:n(k),"onUpdate:modelValue":e[0]||(e[0]=a=>b(k)?k.value=a:null),placeholder:"請選擇"},{default:t(()=>[l(r,{label:"僅新增資料",value:"add"}),l(r,{label:"添加並管理本人數據",value:"selfManage"}),l(r,{label:"添加並管理數據",value:"manage"}),l(r,{label:"查看全部資料",value:"view"}),e[31]||(e[31]=o("hr",null,null,-1)),l(r,{label:"全部有限權的資料",value:"restricted"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),n(k)==="add"?(m(),y("div",nl,[o("div",sl,[e[47]||(e[47]=o("h2",{class:"text-lg font-bold text-primary border-b-4 border-blue-100"}," 出庫基本資料 ",-1)),e[48]||(e[48]=o("p",{class:"text-sm text-gray-500"}," 除銷售出庫外的所有出庫單均走此單據！ ",-1)),l(B,{"label-position":"top",class:"grid grid-cols-1 xl:grid-cols-3 gap-x-16 py-7 px-2 font-bold"},{default:t(()=>[l(c,{label:"出庫類型",required:!0},{default:t(()=>[l(V,{modelValue:n(oe),"onUpdate:modelValue":e[1]||(e[1]=a=>b(oe)?oe.value=a:null),placeholder:"請選擇出庫類型",class:"w-full",clearable:"",filterable:"",remote:"","reserve-keyword":"","remote-show-suffix":"","no-match-text":"沒有符合的數據","no-data-text":"沒有可選擇的數據"},{default:t(()=>[l(r,{label:"銷售換貨出庫",value:"1"}),l(r,{label:"採購退貨出庫",value:"2"}),l(r,{label:"報損出庫",value:"3"}),l(r,{label:"借出出庫",value:"4"}),l(r,{label:"借出直發出庫",value:"5"}),l(r,{label:"盤虧出庫",value:"6"}),l(r,{label:"調撥出庫",value:"7"}),l(r,{label:"銷售贈品出庫",value:"8"}),l(r,{label:"其他",value:"9"})]),_:1},8,["modelValue"])]),_:1}),l(c,{label:"出庫倉庫",required:!0},{default:t(()=>[l(V,{modelValue:n(de),"onUpdate:modelValue":e[2]||(e[2]=a=>b(de)?de.value=a:null),placeholder:"請選擇出庫倉庫",class:"w-full",clearable:"",filterable:"",remote:"","reserve-keyword":"","remote-show-suffix":"","no-match-text":"沒有符合的數據","no-data-text":"沒有可選擇的數據"},{default:t(()=>[l(r,{label:"A倉庫",value:"1"}),l(r,{label:"B倉庫",value:"2"})]),_:1},8,["modelValue"])]),_:1}),l(c,{label:"其他出庫單編號",class:"w-3/4"},{default:t(()=>[l(w,{modelValue:n(ae),"onUpdate:modelValue":e[3]||(e[3]=a=>b(ae)?ae.value=a:null),disabled:"",placeholder:"自動生成無需填寫"},null,8,["modelValue"])]),_:1}),l(c,{label:"收貨地址"},{default:t(()=>[l(ie,{options:xe,class:"w-full",placeholder:"請選擇位址",filterable:"",clearable:""}),l(w,{modelValue:n(ue),"onUpdate:modelValue":e[4]||(e[4]=a=>b(ue)?ue.value=a:null),rows:3,type:"textarea",class:"mt-2",placeholder:"請填寫詳細位址"},null,8,["modelValue"])]),_:1})]),_:1}),e[49]||(e[49]=o("h2",{class:"text-lg font-bold text-primary border-b-4 border-blue-100"}," 出庫產品資料 ",-1)),l(B,{"label-position":"top",class:"grid grid-cols-1 xl:grid-cols-3 gap-x-16 py-7 px-2 font-bold"},{default:t(()=>[l(c,{label:"出庫產品明細",class:"xl:col-span-3",required:!0},{default:t(()=>[o("div",rl,[l(pe,{data:n(q),"header-cell-style":{backgroundColor:"#f5f7f8",color:"#606266",fontWeight:"bold"},"cell-style":{color:"#9ca3af"},"row-class-name":()=>"group",border:"","empty-text":"暫無資料"},{default:t(()=>[l(v,{label:"",width:"80",fixed:""},{default:t(a=>[o("div",ul,[o("span",il,f(a.$index+1),1),o("div",pl,[o("div",ml,[l(g,{class:"col-span-1 col-start-2",type:"danger",link:"",onClick:p=>Ce(a.$index)},{default:t(()=>[...e[32]||(e[32]=[o("i",{class:"ri-delete-bin-line text-lg"},null,-1)])]),_:1},8,["onClick"]),o("div",bl,[l(qe,{trigger:"click",placement:"bottom-start"},{dropdown:t(()=>[l(Oe,null,{default:t(()=>[l(Z,null,{default:t(()=>[...e[34]||(e[34]=[s("複製到下一行",-1)])]),_:1}),l(Z,null,{default:t(()=>[...e[35]||(e[35]=[s("複製到最後一行",-1)])]),_:1}),l(Z,null,{default:t(()=>[...e[36]||(e[36]=[s("向上插入行",-1)])]),_:1}),l(Z,null,{default:t(()=>[...e[37]||(e[37]=[s("向下插入行",-1)])]),_:1})]),_:1})]),default:t(()=>[l(g,{link:"",type:"primary"},{default:t(()=>[...e[33]||(e[33]=[o("i",{class:"ri-more-2-fill"},null,-1)])]),_:1})]),_:1})])])])])]),_:1}),l(v,{label:"選擇產品",width:"100",fixed:""},{default:t(()=>[l(g,{onClick:e[5]||(e[5]=a=>T.value=!0)},{default:t(()=>[...e[38]||(e[38]=[o("i",{class:"ri-database-2-line"},null,-1)])]),_:1})]),_:1}),l(v,{prop:"pdName",label:"產品名稱",width:"100",fixed:""}),l(v,{prop:"pdCode",label:"產品編碼",width:"100"}),l(v,{prop:"brand",label:"品牌",width:"100"}),l(v,{prop:"model",label:"規格型號",width:"100"}),l(v,{prop:"unit",label:"單位",width:"100"}),l(v,{prop:"availableStockQty",label:"當前可用庫存數量",width:"150"}),l(v,{label:"* 本次出庫數量",width:"150"},{default:t(a=>[l(w,{modelValue:a.row.outboundQty,"onUpdate:modelValue":p=>a.row.outboundQty=p,placeholder:"輸入數量",type:"number",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(v,{label:"出庫倉位",width:"150"},{default:t(a=>[l(V,{modelValue:a.row.outboundWarehouse,"onUpdate:modelValue":p=>a.row.outboundWarehouse=p,placeholder:"選擇倉位",class:"w-full"},{default:t(()=>[(m(!0),y(L,null,R(n(_e),p=>(m(),W(r,{key:p.value,label:p.label,value:p.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(v,{label:"銷售單價(含稅)/元",width:"150"},{default:t(a=>[l(w,{modelValue:a.row.sellingPrice,"onUpdate:modelValue":p=>a.row.sellingPrice=p,placeholder:"輸入數量",type:"number",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(v,{label:"成本單價/元",width:"150"},{default:t(a=>[l(w,{modelValue:a.row.costPrice,"onUpdate:modelValue":p=>a.row.costPrice=p,placeholder:"輸入數量",type:"number",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(v,{prop:"pdTotalAmount",label:"產品售價合計(含稅)/元",width:"150"}),l(v,{prop:"totalCost",label:"產品成本合計/元",width:"150"})]),_:1},8,["data"]),o("div",fl,[l(g,{type:"primary",text:"",onClick:ke},{default:t(()=>[...e[39]||(e[39]=[o("i",{class:"ri-add-line text-lg pr-1"},null,-1),s("新增",-1)])]),_:1}),l(g,{type:"primary",text:"",onClick:e[6]||(e[6]=a=>G.value=!0)},{default:t(()=>[...e[40]||(e[40]=[o("i",{class:"ri-file-edit-line text-lg pr-1"},null,-1),s("貼上新增",-1)])]),_:1})])])]),_:1})]),_:1}),l(B,{"label-position":"top",class:"grid grid-cols-1 xl:grid-cols-3 gap-x-16 pb-6 px-2 font-bold"},{default:t(()=>[l(c,{label:"出庫產品總數"},{default:t(()=>[l(w,{disabled:"",placeholder:"暫無內容"})]),_:1}),l(c,{label:"出庫產品售價總額(含稅)/元"},{default:t(()=>[l(w,{disabled:"",placeholder:"暫無內容"})]),_:1}),l(c,{label:"出庫產品成本總額/元"},{default:t(()=>[l(w,{disabled:"",placeholder:"暫無內容"})]),_:1})]),_:1}),e[50]||(e[50]=o("h2",{class:"text-lg font-bold text-primary border-b-4 border-blue-100"}," 出庫確認 ",-1)),l(B,{"label-position":"top",class:"grid grid-cols-1 xl:grid-cols-3 gap-x-16 py-7 px-2 font-bold"},{default:t(()=>[l(c,{label:"出庫確認",required:!0},{default:t(()=>[l(ye,{"model-value":n(z),label:!0,onClick:Pe},{default:t(()=>[l(h,{type:"primary",effect:"dark"},{default:t(()=>[...e[41]||(e[41]=[s("確認",-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),l(c,{label:"出庫時間",required:!0},{default:t(()=>[l(He,{modelValue:n(F),"onUpdate:modelValue":e[7]||(e[7]=a=>b(F)?F.value=a:null),type:"datetime",style:{width:"100%"},format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm"},null,8,["modelValue"])]),_:1}),l(c,{label:"拍照"},{default:t(()=>[l(K,{modelValue:n(ne),"onUpdate:modelValue":e[8]||(e[8]=a=>b(ne)?ne.value=a:null),class:"w-full",type:"border-card",onTabClick:Ue},{default:t(()=>[l(_,{label:"拖拉或點擊",name:"upload"},{default:t(()=>[l(Ke,{class:"w-full",action:"#","show-file-list":!1,"on-change":$e,"before-upload":Qe,multiple:"",accept:"image/*","auto-upload":!1,drag:""},{default:t(()=>[...e[42]||(e[42]=[o("span",{class:"text-gray-500"},"拖拉或點擊上傳圖片",-1)])]),_:1})]),_:1}),l(_,{label:"Ctrl+v",name:"paste"},{default:t(()=>[o("div",{class:"w-full",onPaste:Le},[...e[43]||(e[43]=[o("div",{class:"bg-white border border-dashed border-gray-300 rounded-lg box-border cursor-pointer overflow-hidden px-4 py-2 text-center relative"},[o("span",{class:"text-gray-500"},"Ctrl+v 上傳圖片")],-1)])],32)]),_:1})]),_:1},8,["modelValue"]),n(x).length?(m(),y("div",cl,[(m(!0),y(L,null,R(n(x),(a,p)=>(m(),y("div",{key:p,class:"flex items-center gap-4 p-2 w-full border border-gray-300 rounded-lg",onDragstart:le=>Ne(p),onDragover:e[9]||(e[9]=al(()=>{},["prevent"])),onDrop:le=>Ie(p),draggable:""},[o("img",{src:a.url,alt:"Uploaded image",class:"w-12 h-12 object-cover rounded-lg cursor-move"},null,8,vl),o("div",yl,[o("p",hl,f(a.file.name),1),o("p",wl,f(Be(a.file.size)),1)]),l(g,{onClick:le=>Me(p),text:""},{default:t(()=>[...e[44]||(e[44]=[o("i",{class:"ri-delete-bin-line"},null,-1)])]),_:1},8,["onClick"])],40,gl))),128))])):te("",!0)]),_:1}),l(c,{label:"出庫員"},{default:t(()=>[l(g,{class:"w-full",onClick:e[10]||(e[10]=a=>A.value=!0)},{default:t(()=>[...e[45]||(e[45]=[o("i",{class:"ri-add-line text-lg"},null,-1),s("選擇成員",-1)])]),_:1})]),_:1}),l(c,{label:"倉管歸屬部門"},{default:t(()=>[l(g,{class:"w-full",onClick:e[11]||(e[11]=a=>P.value=!0)},{default:t(()=>[...e[46]||(e[46]=[o("i",{class:"ri-add-line text-lg"},null,-1),s("選擇部門",-1)])]),_:1})]),_:1})]),_:1})]),o("div",_l,[l(g,{type:"primary"},{default:t(()=>[...e[51]||(e[51]=[s("送出",-1)])]),_:1})])])):n(k)==="selfManage"?(m(),y("div",xl,[l(K,{modelValue:n(U),"onUpdate:modelValue":e[12]||(e[12]=a=>b(U)?U.value=a:null)},{default:t(()=>[l(_,{name:"1"},{label:t(()=>[...e[52]||(e[52]=[o("span",{class:"custom-tabs-label"},[o("i",{class:"ri-table-line mr-1"}),o("span",null,"全部出庫")],-1)])]),default:t(()=>[l(S,{tableData:n(Q),columns:n(C)},{approverStatus:t(({row:a})=>[l(h,{type:M(a.approverStatus),effect:"dark"},{default:t(()=>[s(f(a.approverStatus),1)]),_:2},1032,["type"])]),processStatus:t(({row:a})=>[l(h,{type:H(a.processStatus)},{default:t(()=>[s(f(a.processStatus),1)]),_:2},1032,["type"])]),_:1},8,["tableData","columns"])]),_:1}),l(_,{name:"2"},{label:t(()=>[...e[53]||(e[53]=[o("span",{class:"custom-tabs-label"},[o("i",{class:"ri-table-line mr-1"}),o("span",null,"待出庫")],-1)])]),default:t(()=>[l(S,{tableData:[],columns:n(C)},null,8,["columns"])]),_:1}),l(_,{name:"3"},{label:t(()=>[...e[54]||(e[54]=[o("span",{class:"custom-tabs-label"},[o("i",{class:"ri-table-line mr-1"}),o("span",null,"已出庫")],-1)])]),default:t(()=>[l(S,{tableData:n(Q),columns:n(C)},{approverStatus:t(({row:a})=>[l(h,{type:M(a.approverStatus),effect:"dark"},{default:t(()=>[s(f(a.approverStatus),1)]),_:2},1032,["type"])]),processStatus:t(({row:a})=>[l(h,{type:H(a.processStatus)},{default:t(()=>[s(f(a.processStatus),1)]),_:2},1032,["type"])]),_:1},8,["tableData","columns"])]),_:1})]),_:1},8,["modelValue"])])):n(k)==="manage"?(m(),y("div",Vl,[l(K,{modelValue:n(U),"onUpdate:modelValue":e[13]||(e[13]=a=>b(U)?U.value=a:null)},{default:t(()=>[l(_,{name:"1"},{label:t(()=>[...e[55]||(e[55]=[o("span",{class:"custom-tabs-label"},[o("i",{class:"ri-table-line mr-1"}),o("span",null,"全部出庫")],-1)])]),default:t(()=>[l(S,{tableData:n(Q),columns:n(C)},{approverStatus:t(({row:a})=>[l(h,{type:M(a.approverStatus),effect:"dark"},{default:t(()=>[s(f(a.approverStatus),1)]),_:2},1032,["type"])]),processStatus:t(({row:a})=>[l(h,{type:H(a.processStatus)},{default:t(()=>[s(f(a.processStatus),1)]),_:2},1032,["type"])]),_:1},8,["tableData","columns"])]),_:1}),l(_,{name:"2"},{label:t(()=>[...e[56]||(e[56]=[o("span",{class:"custom-tabs-label"},[o("i",{class:"ri-table-line mr-1"}),o("span",null,"待出庫")],-1)])]),default:t(()=>[l(S,{tableData:[],columns:n(C)},null,8,["columns"])]),_:1}),l(_,{name:"3"},{label:t(()=>[...e[57]||(e[57]=[o("span",{class:"custom-tabs-label"},[o("i",{class:"ri-table-line mr-1"}),o("span",null,"已出庫")],-1)])]),default:t(()=>[l(S,{tableData:n(Q),columns:n(C)},{approverStatus:t(({row:a})=>[l(h,{type:M(a.approverStatus),effect:"dark"},{default:t(()=>[s(f(a.approverStatus),1)]),_:2},1032,["type"])]),processStatus:t(({row:a})=>[l(h,{type:H(a.processStatus)},{default:t(()=>[s(f(a.processStatus),1)]),_:2},1032,["type"])]),_:1},8,["tableData","columns"])]),_:1})]),_:1},8,["modelValue"])])):n(k)==="view"?(m(),y("div",kl,[l(S,{edit:!1,tableData:n(Q),columns:n(C)},{approverStatus:t(({row:a})=>[l(h,{type:M(a.approverStatus),effect:"dark"},{default:t(()=>[s(f(a.approverStatus),1)]),_:2},1032,["type"])]),processStatus:t(({row:a})=>[l(h,{type:H(a.processStatus)},{default:t(()=>[s(f(a.processStatus),1)]),_:2},1032,["type"])]),_:1},8,["tableData","columns"])])):n(k)==="restricted"?(m(),y("div",Cl,[l(S,{tableData:n(Q),columns:n(C)},{outboundLabel:t(({row:a})=>[(m(!0),y(L,null,R(a.outboundLabel,(p,le)=>(m(),W(h,{key:le,type:Re(p),effect:"dark",class:"mr-2"},{default:t(()=>[s(f(p),1)]),_:2},1032,["type"]))),128))]),_:1},8,["tableData","columns"])])):te("",!0),l(ee,{modelValue:n(T),"onUpdate:modelValue":e[16]||(e[16]=a=>b(T)?T.value=a:null)},{header:t(()=>[...e[58]||(e[58]=[o("div",{class:"flex flex-col items-start mb-4"},[o("span",{class:"text-lg font-bold text-gray-500 mb-2"},"選擇資料"),o("hr",{class:"w-full border-t border-gray-300"})],-1)])]),footer:t(()=>[o("div",Wl,[l(g,{onClick:e[15]||(e[15]=a=>T.value=!1)},{default:t(()=>[...e[62]||(e[62]=[s("取消",-1)])]),_:1}),l(g,{type:"primary",onClick:Te},{default:t(()=>[...e[63]||(e[63]=[s(" 確定 ",-1)])]),_:1})])]),default:t(()=>[o("div",Sl,[l(g,{type:"primary"},{default:t(()=>[...e[59]||(e[59]=[o("i",{class:"ri-add-line"},null,-1),s("新增",-1)])]),_:1}),o("div",Dl,[l(w,{modelValue:n(Y),"onUpdate:modelValue":e[14]||(e[14]=a=>b(Y)?Y.value=a:null),placeholder:"輸入關鍵字",clearable:""},{prefix:t(()=>[...e[60]||(e[60]=[o("i",{class:"ri-search-line"},null,-1)])]),_:1},8,["modelValue"]),l(ze,{content:"篩選條件",placement:"bottom","hide-after":10},{default:t(()=>[l(g,{text:""},{default:t(()=>[...e[61]||(e[61]=[o("i",{class:"ri-filter-line"},null,-1)])]),_:1})]),_:1})])]),l(pe,{data:n(Ae),"header-cell-style":{backgroundColor:"#f5f7f8",color:"#606266",fontWeight:"bold"},class:"mb-4",border:"",onSelectionChange:We},{default:t(()=>[l(v,{type:"selection",width:"55",align:"center",fixed:""}),(m(!0),y(L,null,R(n(Se),a=>(m(),W(v,{key:a.prop,prop:a.prop,label:a.label,width:a.minWidth||null,align:a.align,"header-align":a.headerAlign},ol({_:2},[a.prop==="status"?{name:"default",fn:t(({row:p})=>[l(h,{type:M(p.status)},{default:t(()=>[s(f(p.status),1)]),_:2},1032,["type"])]),key:"0"}:void 0]),1032,["prop","label","width","align","header-align"]))),128))]),_:1},8,["data"])]),_:1},8,["modelValue"]),l(ee,{modelValue:n(A),"onUpdate:modelValue":e[23]||(e[23]=a=>b(A)?A.value=a:null),width:"800"},{header:t(()=>[...e[64]||(e[64]=[o("div",{class:"flex flex-col items-start mb-4"},[o("span",{class:"text-lg font-bold text-gray-500 mb-2"},"成員列表"),o("hr",{class:"w-full border-t border-gray-300"})],-1)])]),footer:t(()=>[o("div",Nl,[l(g,{onClick:e[21]||(e[21]=a=>A.value=!1)},{default:t(()=>[...e[68]||(e[68]=[s("取消",-1)])]),_:1}),l(g,{type:"primary",onClick:e[22]||(e[22]=a=>A.value=!1)},{default:t(()=>[...e[69]||(e[69]=[s(" 確定 ",-1)])]),_:1})])]),default:t(()=>[o("div",Tl,[n(O)?(m(),W(h,{key:0,closable:"",type:"primary",onClose:e[17]||(e[17]=()=>{O.value=null,E.value=null})},{default:t(()=>[s(f(n(O).name),1)]),_:1})):te("",!0)]),l(w,{modelValue:n(D),"onUpdate:modelValue":e[18]||(e[18]=a=>b(D)?D.value=a:null),placeholder:"輸入關鍵字",clearable:""},{prefix:t(()=>[...e[65]||(e[65]=[o("i",{class:"ri-search-line"},null,-1)])]),_:1},8,["modelValue"]),l(K,{modelValue:n($),"onUpdate:modelValue":e[20]||(e[20]=a=>b($)?$.value=a:null),class:"demo-tabs mx-2",onTabClick:ce},{default:t(()=>[l(_,{label:"成員",name:"member"},{default:t(()=>[o("div",Al,[o("div",Pl,[l(he,{ref_key:"treeRef",ref:re,style:{"max-width":"600px"},class:"filter-tree",data:n(ve),"default-expand-all":"","highlight-current":!0,"filter-node-method":ge,onNodeClick:Fe},null,8,["data"])]),o("div",Ul,[n(J).length>0?(m(),y("div",$l,[l(Ge,{class:"flex flex-col",modelValue:n(E),"onUpdate:modelValue":e[19]||(e[19]=a=>b(E)?E.value=a:null),onChange:Ee},{default:t(()=>[o("div",Ql,[(m(!0),y(L,null,R(n(J),a=>(m(),W(ye,{key:a.id,value:a.id},{default:t(()=>[s(f(a.name),1)]),_:2},1032,["value"]))),128))])]),_:1},8,["modelValue"])])):(m(),y("div",Ml,[...e[66]||(e[66]=[o("p",null,"沒有可選成員",-1)])]))])])]),_:1}),l(_,{label:"當前使用者",name:"current"},{default:t(()=>[...e[67]||(e[67]=[o("div",{class:"flex h-72 items-center justify-center"},"沒有可選成員",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),l(ee,{modelValue:n(P),"onUpdate:modelValue":e[29]||(e[29]=a=>b(P)?P.value=a:null),width:"800"},{header:t(()=>[...e[70]||(e[70]=[o("div",{class:"flex flex-col items-start mb-4"},[o("span",{class:"text-lg font-bold text-gray-500 mb-2"},"部門清單"),o("hr",{class:"w-full border-t border-gray-300"})],-1)])]),footer:t(()=>[o("div",Ll,[l(g,{onClick:e[27]||(e[27]=a=>P.value=!1)},{default:t(()=>[...e[73]||(e[73]=[s("取消",-1)])]),_:1}),l(g,{type:"primary",onClick:e[28]||(e[28]=a=>P.value=!1)},{default:t(()=>[...e[74]||(e[74]=[s(" 確定 ",-1)])]),_:1})])]),default:t(()=>[o("div",Il,[n(X)?(m(),W(h,{key:0,closable:"",type:"primary",onClose:e[24]||(e[24]=a=>X.value=null)},{default:t(()=>[s(f(n(X)),1)]),_:1})):te("",!0)]),l(w,{modelValue:n(D),"onUpdate:modelValue":e[25]||(e[25]=a=>b(D)?D.value=a:null),placeholder:"輸入關鍵字",clearable:""},{prefix:t(()=>[...e[71]||(e[71]=[o("i",{class:"ri-search-line"},null,-1)])]),_:1},8,["modelValue"]),l(K,{modelValue:n($),"onUpdate:modelValue":e[26]||(e[26]=a=>b($)?$.value=a:null),class:"demo-tabs mx-2",onTabClick:ce},{default:t(()=>[l(_,{label:"成員",name:"member"},{default:t(()=>[o("div",Bl,[l(he,{ref_key:"treeRef",ref:re,class:"filter-tree",data:n(ve),"default-expand-all":"","highlight-current":!0,"filter-node-method":ge,onNodeClick:Ye},null,8,["data"])])]),_:1}),l(_,{label:"當前使用者所處部門",name:"current"},{default:t(()=>[...e[72]||(e[72]=[o("div",{class:"flex h-72 items-center justify-center"},"沒有可選部門",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),l(ee,{modelValue:n(G),"onUpdate:modelValue":e[30]||(e[30]=a=>b(G)?G.value=a:null),width:"45%"},{header:t(()=>[...e[75]||(e[75]=[o("div",{class:"flex flex-col items-start mb-4"},[o("span",{class:"text-lg font-bold text-gray-500 mb-2"},"貼上新增"),o("hr",{class:"w-full border-t border-gray-300"})],-1)])]),default:t(()=>[e[76]||(e[76]=o("ul",{class:"list-disc pl-5 space-y-1 mb-4"},[o("li",null," 使用快捷鍵 ctrl + v 可將Excel內容貼上到表格中，也可直接編輯表格內容，使用 ctrl + z 撤銷貼上操作 "),o("li",null,[s(" 批次貼上時，"),o("strong",null,"將跳過不可編輯欄位"),s("，貼上資料將順延至下一列，請注意對應欄位順序 ")]),o("li",null,"當前子表單總行數不可超過200行")],-1)),l(pe,{data:n(j),"header-cell-style":{backgroundColor:"#f5f7f8",color:"#606266",fontWeight:"bold"},class:"mb-4",border:"",onPaste:Ve,"empty-text":"Ctrl+v"},{default:t(()=>[(m(!0),y(L,null,R(n(be),a=>(m(),W(v,{key:a.prop,prop:a.prop,label:a.label,width:a.minWidth||null,align:a.align,"header-align":a.headerAlign},null,8,["prop","label","width","align","header-align"]))),128))]),_:1},8,["data"])]),_:1},8,["modelValue"])])}}},El=Je(Rl,[["__scopeId","data-v-3c951518"]]);export{El as default};
